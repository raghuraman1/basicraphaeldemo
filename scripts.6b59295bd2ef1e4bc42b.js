function useThis(t){var e=Raphael(t,500,500),r=e.rect(200,200,100,100).attr("fill","#f00"),n=e.freeTransform(r);n.hideHandles(),n.showHandles(),n.attrs.rotate=45,n.apply(),n.unplug(),(n=e.freeTransform(r,{keepRatio:!0},function(t,e){console.log(t.attrs)})).setOpts({keepRatio:!1})}(function(t){var e,r,n="0.3.4",a="hasOwnProperty",i=/[\.\/]/,s=function(){},o=function(t,e){return t-e},l={n:{}},h=function(t,n){var a,i=r,s=Array.prototype.slice.call(arguments,2),l=h.listeners(t),c=0,u=[],p={},f=[],d=e;e=t,r=0;for(var x=0,y=l.length;x<y;x++)"zIndex"in l[x]&&(u.push(l[x].zIndex),l[x].zIndex<0&&(p[l[x].zIndex]=l[x]));for(u.sort(o);u[c]<0;)if(a=p[u[c++]],f.push(a.apply(n,s)),r)return r=i,f;for(x=0;x<y;x++)if("zIndex"in(a=l[x]))if(a.zIndex==u[c]){if(f.push(a.apply(n,s)),r)break;do{if((a=p[u[++c]])&&f.push(a.apply(n,s)),r)break}while(a)}else p[a.zIndex]=a;else if(f.push(a.apply(n,s)),r)break;return r=i,e=d,f.length?f:null};h.listeners=function(t){var e,r,n,a,s,o,h,c,u=t.split(i),p=l,f=[p],d=[];for(a=0,s=u.length;a<s;a++){for(c=[],o=0,h=f.length;o<h;o++)for(r=[(p=f[o].n)[u[a]],p["*"]],n=2;n--;)(e=r[n])&&(c.push(e),d=d.concat(e.f||[]));f=c}return d},h.on=function(t,e){for(var r=t.split(i),n=l,a=0,o=r.length;a<o;a++)!(n=n.n)[r[a]]&&(n[r[a]]={n:{}}),n=n[r[a]];for(n.f=n.f||[],a=0,o=n.f.length;a<o;a++)if(n.f[a]==e)return s;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},h.stop=function(){r=1},h.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},h.off=h.unbind=function(t,e){var r,n,s,o,h,c,u,p=t.split(i),f=[l];for(o=0,h=p.length;o<h;o++)for(c=0;c<f.length;c+=s.length-2){if(s=[c,1],r=f[c].n,"*"!=p[o])r[p[o]]&&s.push(r[p[o]]);else for(n in r)r[a](n)&&s.push(r[n]);f.splice.apply(f,s)}for(o=0,h=f.length;o<h;o++)for(r=f[o];r.n;){if(e){if(r.f){for(c=0,u=r.f.length;c<u;c++)if(r.f[c]==e){r.f.splice(c,1);break}!r.f.length&&delete r.f}for(n in r.n)if(r.n[a](n)&&r.n[n].f){var d=r.n[n].f;for(c=0,u=d.length;c<u;c++)if(d[c]==e){d.splice(c,1);break}!d.length&&delete r.n[n].f}}else for(n in delete r.f,r.n)r.n[a](n)&&r.n[n].f&&delete r.n[n].f;r=r.n}},h.once=function(t,e){var r=function(){var n=e.apply(this,arguments);return h.unbind(t,r),n};return h.on(t,r)},h.version=n,h.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=h:"undefined"!=typeof define?define("eve",[],function(){return h}):t.eve=h})(this),function(){function t(t){for(var e=0;e<ee.length;e++)ee[e].el.paper==t&&ee.splice(e--,1)}function e(t,e,r,a,s,o){r=$(r);var l,h,c,u,p,f,d=t.ms,y={},g={},m={};if(a)for(_=0,k=ee.length;_<k;_++){var b=ee[_];if(b.el.id==e.id&&b.anim==t){b.percent!=r?(ee.splice(_,1),c=1):h=b,e.attr(b.totalOrigin);break}}else a=+g;for(var _=0,k=t.percents.length;_<k;_++){if(t.percents[_]==r||t.percents[_]>a*t.top){d=d/t.top*((r=t.percents[_])-(p=t.percents[_-1]||0)),u=t.percents[_+1],l=t.anim[r];break}a&&e.attr(t.anim[t.percents[_]])}if(l){if(h)h.initstatus=a,h.start=new Date-h.ms*a;else{for(var C in l)if(l[w](C)&&(K[w](C)||e.paper.customAttributes[w](C)))switch(y[C]=e.attr(C),null==y[C]&&(y[C]=J[C]),g[C]=l[C],K[C]){case q:m[C]=(g[C]-y[C])/d;break;case"colour":y[C]=x.getRGB(y[C]);var B=x.getRGB(g[C]);m[C]={r:(B.r-y[C].r)/d,g:(B.g-y[C].g)/d,b:(B.b-y[C].b)/d};break;case"path":var M=Rt(y[C],g[C]),z=M[1];for(y[C]=M[0],m[C]=[],_=0,k=y[C].length;_<k;_++){m[C][_]=[0];for(var T=1,N=y[C][_].length;T<N;T++)m[C][_][T]=(z[_][T]-y[C][_][T])/d}break;case"transform":var F=e._,P=Ot(F[C],g[C]);if(P)for(y[C]=P.from,g[C]=P.to,m[C]=[],m[C].real=!0,_=0,k=y[C].length;_<k;_++)for(m[C][_]=[y[C][_][0]],T=1,N=y[C][_].length;T<N;T++)m[C][_][T]=(g[C][_][T]-y[C][_][T])/d;else{var L=e.matrix||new i,O={_:{transform:F.transform},getBBox:function(){return e.getBBox(1)}};y[C]=[L.a,L.b,L.c,L.d,L.e,L.f],Pt(O,g[C]),g[C]=O._.transform,m[C]=[(O.matrix.a-L.a)/d,(O.matrix.b-L.b)/d,(O.matrix.c-L.c)/d,(O.matrix.d-L.d)/d,(O.matrix.e-L.e)/d,(O.matrix.f-L.f)/d]}break;case"csv":var E=A(l[C])[R](v),I=A(y[C])[R](v);if("clip-rect"==C)for(y[C]=I,m[C]=[],_=I.length;_--;)m[C][_]=(E[_]-y[C][_])/d;g[C]=E;break;default:for(E=[][S](l[C]),I=[][S](y[C]),m[C]=[],_=e.paper.customAttributes[C].length;_--;)m[C][_]=((E[_]||0)-(I[_]||0))/d}var j=l.easing,D=x.easing_formulas[j];if(!D)if((D=A(j).match(G))&&5==D.length){var H=D;D=function(t){return n(t,+H[1],+H[2],+H[3],+H[4],d)}}else D=lt;if(b={anim:t,percent:r,timestamp:f=l.start||t.start||+new Date,start:f+(t.del||0),status:0,initstatus:a||0,stop:!1,ms:d,easing:D,from:y,diff:m,to:g,el:e,callback:l.callback,prev:p,next:u,repeat:o||t.times,origin:e.attr(),totalOrigin:s},ee.push(b),a&&!h&&!c&&(b.stop=!0,b.start=new Date-d*a,1==ee.length))return ne();c&&(b.start=new Date-b.ms*a),1==ee.length&&re(ne)}eve("raphael.anim.start."+e.id,e,t)}}function r(t,e){var r=[],n={};if(this.ms=e,this.times=1,t){for(var a in t)t[w](a)&&(n[$(a)]=t[a],r.push($(a)));r.sort(ot)}this.anim=n,this.top=r[r.length-1],this.percents=r}function n(t,e,r,n,a,i){function s(t){return((h*t+l)*t+o)*t}var o=3*e,l=3*(n-e)-o,h=1-o-l,c=3*r,u=3*(a-r)-c,p=1-c-u;return function(t,e){var r=function(t,e){var r,n,a,i,c,u;for(a=t,u=0;u<8;u++){if(i=s(a)-t,I(i)<e)return a;if(I(c=(3*h*a+2*l)*a+o)<1e-6)break;a-=i/c}if(n=1,(a=t)<(r=0))return r;if(a>n)return n;for(;r<n;){if(i=s(a),I(i-t)<e)return a;t>i?r=a:n=a,a=(n-r)/2+r}return a}(t,1/(200*i));return((p*r+u)*r+c)*r}(t)}function a(){return this.x+T+this.y+T+this.width+" \xc3\u2014 "+this.height}function i(t,e,r,n,a,i){null!=t?(this.a=+t,this.b=+e,this.c=+r,this.d=+n,this.e=+a,this.f=+i):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function s(t,e,r){t=x._path2curve(t),e=x._path2curve(e);for(var n,a,i,s,l,h,c,u,p,f,d=r?0:[],y=0,g=t.length;y<g;y++){var v=t[y];if("M"==v[0])n=l=v[1],a=h=v[2];else{"C"==v[0]?(n=(p=[n,a].concat(v.slice(1)))[6],a=p[7]):(p=[n,a,n,a,l,h,l,h],n=l,a=h);for(var m=0,b=e.length;m<b;m++){var w=e[m];if("M"==w[0])i=c=w[1],s=u=w[2];else{"C"==w[0]?(i=(f=[i,s].concat(w.slice(1)))[6],s=f[7]):(f=[i,s,i,s,c,u,c,u],i=c,s=u);var _=o(p,f,r);if(r)d+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=y,_[k].segment2=m,_[k].bez1=p,_[k].bez2=f;d=d.concat(_)}}}}}return d}function o(t,e,r){var n=x.bezierBBox(t),a=x.bezierBBox(e);if(!x.isBBoxIntersect(n,a))return r?0:[];for(var i=~~(h.apply(0,t)/5),s=~~(h.apply(0,e)/5),o=[],c=[],u={},p=r?0:[],f=0;f<i+1;f++){var d=x.findDotsAtSegment.apply(x,t.concat(f/i));o.push({x:d.x,y:d.y,t:f/i})}for(f=0;f<s+1;f++)d=x.findDotsAtSegment.apply(x,e.concat(f/s)),c.push({x:d.x,y:d.y,t:f/s});for(f=0;f<i;f++)for(var y=0;y<s;y++){var g=o[f],v=o[f+1],m=c[y],b=c[y+1],w=I(v.x-g.x)<.001?"y":"x",_=I(b.x-m.x)<.001?"y":"x",k=l(g.x,g.y,v.x,v.y,m.x,m.y,b.x,b.y);if(k){if(u[k.x.toFixed(4)]==k.y.toFixed(4))continue;u[k.x.toFixed(4)]=k.y.toFixed(4);var C=g.t+I((k[w]-g[w])/(v[w]-g[w]))*(v.t-g.t),B=m.t+I((k[_]-m[_])/(b[_]-m[_]))*(b.t-m.t);C>=0&&C<=1&&B>=0&&B<=1&&(r?p++:p.push({x:k.x,y:k.y,t1:C,t2:B}))}}return p}function l(t,e,r,n,a,i,s,o){if(!(O(t,r)<E(a,s)||E(t,r)>O(a,s)||O(e,n)<E(i,o)||E(e,n)>O(i,o))){var l=(t*n-e*r)*(a-s)-(t-r)*(a*o-i*s),h=(t*n-e*r)*(i-o)-(e-n)*(a*o-i*s),c=(t-r)*(i-o)-(e-n)*(a-s);if(!c)return;var u=l/c,p=h/c,f=+u.toFixed(2),d=+p.toFixed(2);if(f<+E(t,r).toFixed(2)||f>+O(t,r).toFixed(2)||f<+E(a,s).toFixed(2)||f>+O(a,s).toFixed(2)||d<+E(e,n).toFixed(2)||d>+O(e,n).toFixed(2)||d<+E(i,o).toFixed(2)||d>+O(i,o).toFixed(2))return;return{x:u,y:p}}}function h(t,e,r,n,a,i,s,o,l){null==l&&(l=1);for(var h=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,d=0;d<12;d++){var x=h*u[d]+h,y=c(x,t,r,a,s),g=c(x,e,n,i,o);f+=p[d]*L.sqrt(y*y+g*g)}return h*f}function c(t,e,r,n,a){return t*(t*(-3*e+9*r-9*n+3*a)+6*e-12*r+6*n)-3*e+3*r}function u(t,e){for(var r=[],n=0,a=t.length;a-2*!e>n;n+=2){var i=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?a-4==n?i[3]={x:+t[0],y:+t[1]}:a-2==n&&(i[2]={x:+t[0],y:+t[1]},i[3]={x:+t[2],y:+t[3]}):i[0]={x:+t[a-2],y:+t[a-1]}:a-4==n?i[3]=i[2]:n||(i[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(6*i[1].x-i[0].x+i[2].x)/6,(6*i[1].y-i[0].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return r}function p(){return this.hex}function f(t,e,r){return function n(){var a=Array.prototype.slice.call(arguments,0),i=a.join("\xe2\x90\u20ac"),s=n.cache=n.cache||{},o=n.count=n.count||[];return s[w](i)?(function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return t.push(t.splice(r,1)[0])}(o,i),r?r(s[i]):s[i]):(o.length>=1e3&&delete s[o.shift()],o.push(i),s[i]=t[B](e,a),r?r(s[i]):s[i])}}function d(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var r in t)t[w](r)&&(e[r]=d(t[r]));return e}function x(t){if(x.is(t,"function"))return y?t():eve.on("raphael.DOMload",t);if(x.is(t,V))return x._engine.create[B](x,t.splice(0,3+x.is(t[0],q))).add(t);var e=Array.prototype.slice.call(arguments,0);if(x.is(e[e.length-1],"function")){var r=e.pop();return y?r.call(x._engine.create[B](x,e)):eve.on("raphael.DOMload",function(){r.call(x._engine.create[B](x,e))})}return x._engine.create[B](x,arguments)}x.version="2.1.0",x.eve=eve;var y,g,v=/[, ]+/,m={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},b=/\{(\d+)\}/g,w="hasOwnProperty",_={doc:document,win:window},k={was:Object.prototype[w].call(_.win,"Raphael"),is:_.win.Raphael},C=function(){this.ca=this.customAttributes={}},B="apply",S="concat",M="createTouch"in _.doc,z="",T=" ",A=String,R="split",N="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[R](T),F={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},P=A.prototype.toLowerCase,L=Math,O=L.max,E=L.min,I=L.abs,j=L.pow,D=L.PI,q="number",H="string",V="array",Y=Object.prototype.toString,W=(x._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},G=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,U=L.round,$=parseFloat,Z=parseInt,Q=A.prototype.toUpperCase,J=x._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},K=x._availableAnimAttrs={blur:q,"clip-rect":"csv",cx:q,cy:q,fill:"colour","fill-opacity":q,"font-size":q,height:q,opacity:q,path:"path",r:q,rx:q,ry:q,stroke:"colour","stroke-opacity":q,"stroke-width":q,transform:"transform",width:q,x:q,y:q},tt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,et={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,nt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,it=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,st=(x._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ot=function(t,e){return $(t)-$(e)},lt=function(t){return t},ht=x._rectPath=function(t,e,r,n,a){return a?[["M",t+a,e],["l",r-2*a,0],["a",a,a,0,0,1,a,a],["l",0,n-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-r,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-n],["a",a,a,0,0,1,a,-a],["z"]]:[["M",t,e],["l",r,0],["l",0,n],["l",-r,0],["z"]]},ct=function(t,e,r,n){return null==n&&(n=r),[["M",t,e],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]]},ut=x._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ct(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ct(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)}},pt=x.mapPath=function(t,e){if(!e)return t;var r,n,a,i,s,o,l;for(a=0,s=(t=Rt(t)).length;a<s;a++)for(i=1,o=(l=t[a]).length;i<o;i+=2)r=e.x(l[i],l[i+1]),n=e.y(l[i],l[i+1]),l[i]=r,l[i+1]=n;return t};if(x._g=_,"VML"==(x.type=_.win.SVGAngle||_.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML")){var ft,dt=_.doc.createElement("div");if(dt.innerHTML='<v:shape adj="1"/>',(ft=dt.firstChild).style.behavior="url(#default#VML)",!ft||"object"!=typeof ft.adj)return x.type=z;dt=null}x.svg=!(x.vml="VML"==x.type),x._Paper=C,x.fn=g=C.prototype=x.prototype,x._id=0,x._oid=0,x.is=function(t,e){return"finite"==(e=P.call(e))?!X[w](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||Y.call(t).slice(8,-1).toLowerCase()==e},x.angle=function(t,e,r,n,a,i){if(null==a){var s=t-r,o=e-n;return s||o?(180+180*L.atan2(-o,-s)/D+360)%360:0}return x.angle(t,e,a,i)-x.angle(r,n,a,i)},x.rad=function(t){return t%360*D/180},x.deg=function(t){return 180*t/D%360},x.snapTo=function(t,e,r){if(r=x.is(r,"finite")?r:10,x.is(t,V)){for(var n=t.length;n--;)if(I(t[n]-e)<=r)return t[n]}else{var a=e%(t=+t);if(a<r)return e-a;if(a>t-r)return e-a+t}return e},x.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*L.random()|0;return("x"==t?e:3&e|8).toString(16)}),x.setWindow=function(t){eve("raphael.setWindow",x,_.win,t),_.win=t,_.doc=_.win.document,x._engine.initWin&&x._engine.initWin(_.win)};var xt=function(t){if(x.vml){var e,r=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),e=n.body}catch(t){e=createPopup().document.body}var a=e.createTextRange();xt=f(function(t){try{e.style.color=A(t).replace(r,z);var n=a.queryCommandValue("ForeColor");return"#"+("000000"+(n=(255&n)<<16|65280&n|(16711680&n)>>>16).toString(16)).slice(-6)}catch(t){return"none"}})}else{var i=_.doc.createElement("i");i.title="Rapha\xc3\xabl Colour Picker",i.style.display="none",_.doc.body.appendChild(i),xt=f(function(t){return i.style.color=t,_.doc.defaultView.getComputedStyle(i,z).getPropertyValue("color")})}return xt(t)},yt=function(){return"hsb("+[this.h,this.s,this.b]+")"},gt=function(){return"hsl("+[this.h,this.s,this.l]+")"},vt=function(){return this.hex},mt=function(t,e,r){if(null==e&&x.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,e=t.g,t=t.r),null==e&&x.is(t,H)){var n=x.getRGB(t);t=n.r,e=n.g,r=n.b}return(t>1||e>1||r>1)&&(t/=255,e/=255,r/=255),[t,e,r]},bt=function(t,e,r,n){var a={r:t*=255,g:e*=255,b:r*=255,hex:x.rgb(t,e,r),toString:vt};return x.is(n,"finite")&&(a.opacity=n),a};x.color=function(t){var e;return x.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=x.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):x.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=x.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(x.is(t,"string")&&(t=x.getRGB(t)),x.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=x.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=x.rgb2hsb(t),t.v=e.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=vt,t},x.hsb2rgb=function(t,e,r,n){var a,i,s,o,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,n=(t=t.h).o),o=(l=r*e)*(1-I((t=(t*=360)%360/60)%2-1)),a=i=s=r-l,bt(a+=[l,o,0,0,o,l][t=~~t],i+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],n)},x.hsl2rgb=function(t,e,r,n){var a,i,s,o,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,e=t.s,t=t.h),(t>1||e>1||r>1)&&(t/=360,e/=100,r/=100),t=(t*=360)%360/60,o=(l=2*e*(r<.5?r:1-r))*(1-I(t%2-1)),a=i=s=r-l/2,bt(a+=[l,o,0,0,o,l][t=~~t],i+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],n)},x.rgb2hsb=function(t,e,r){var n,a;return r=mt(t,e,r),{h:((0==(a=(n=O(t=r[0],e=r[1],r=r[2]))-E(t,e,r))?null:n==t?(e-r)/a:n==e?(r-t)/a+2:(t-e)/a+4)+360)%6*60/360,s:0==a?0:a/n,b:n,toString:yt}},x.rgb2hsl=function(t,e,r){var n,a,i,s;return r=mt(t,e,r),n=((a=O(t=r[0],e=r[1],r=r[2]))+(i=E(t,e,r)))/2,{h:((0==(s=a-i)?null:a==t?(e-r)/s:a==e?(r-t)/s+2:(t-e)/s+4)+360)%6*60/360,s:0==s?0:n<.5?s/(2*n):s/(2-2*n),l:n,toString:gt}},x._path2string=function(){return this.join(",").replace(rt,"$1")},x._preload=function(t,e){var r=_.doc.createElement("img");r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){e.call(this),this.onload=null,_.doc.body.removeChild(this)},r.onerror=function(){_.doc.body.removeChild(this)},_.doc.body.appendChild(r),r.src=t},x.getRGB=f(function(t){if(!t||(t=A(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:p};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:p};!et[w](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=xt(t));var e,r,n,a,i,s,o=t.match(W);return o?(o[2]&&(n=Z(o[2].substring(5),16),r=Z(o[2].substring(3,5),16),e=Z(o[2].substring(1,3),16)),o[3]&&(n=Z((i=o[3].charAt(3))+i,16),r=Z((i=o[3].charAt(2))+i,16),e=Z((i=o[3].charAt(1))+i,16)),o[4]&&(s=o[4][R](tt),e=$(s[0]),"%"==s[0].slice(-1)&&(e*=2.55),r=$(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),n=$(s[2]),"%"==s[2].slice(-1)&&(n*=2.55),"rgba"==o[1].toLowerCase().slice(0,4)&&(a=$(s[3])),s[3]&&"%"==s[3].slice(-1)&&(a/=100)),o[5]?(s=o[5][R](tt),e=$(s[0]),"%"==s[0].slice(-1)&&(e*=2.55),r=$(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),n=$(s[2]),"%"==s[2].slice(-1)&&(n*=2.55),("deg"==s[0].slice(-3)||"\xc2\xb0"==s[0].slice(-1))&&(e/=360),"hsba"==o[1].toLowerCase().slice(0,4)&&(a=$(s[3])),s[3]&&"%"==s[3].slice(-1)&&(a/=100),x.hsb2rgb(e,r,n,a)):o[6]?(s=o[6][R](tt),e=$(s[0]),"%"==s[0].slice(-1)&&(e*=2.55),r=$(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),n=$(s[2]),"%"==s[2].slice(-1)&&(n*=2.55),("deg"==s[0].slice(-3)||"\xc2\xb0"==s[0].slice(-1))&&(e/=360),"hsla"==o[1].toLowerCase().slice(0,4)&&(a=$(s[3])),s[3]&&"%"==s[3].slice(-1)&&(a/=100),x.hsl2rgb(e,r,n,a)):((o={r:e,g:r,b:n,toString:p}).hex="#"+(16777216|n|r<<8|e<<16).toString(16).slice(1),x.is(a,"finite")&&(o.opacity=a),o)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:p}},x),x.hsb=f(function(t,e,r){return x.hsb2rgb(t,e,r).hex}),x.hsl=f(function(t,e,r){return x.hsl2rgb(t,e,r).hex}),x.rgb=f(function(t,e,r){return"#"+(16777216|r|e<<8|t<<16).toString(16).slice(1)}),(x.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex}).reset=function(){delete this.start},x.parsePathString=function(t){if(!t)return null;var e=wt(t);if(e.arr)return kt(e.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return x.is(t,V)&&x.is(t[0],V)&&(n=kt(t)),n.length||A(t).replace(nt,function(t,e,a){var i=[],s=e.toLowerCase();if(a.replace(it,function(t,e){e&&i.push(+e)}),"m"==s&&i.length>2&&(n.push([e][S](i.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)n.push([e][S](i));else for(;i.length>=r[s]&&(n.push([e][S](i.splice(0,r[s]))),r[s]););}),n.toString=x._path2string,e.arr=kt(n),n},x.parseTransformString=f(function(t){if(!t)return null;var e=[];return x.is(t,V)&&x.is(t[0],V)&&(e=kt(t)),e.length||A(t).replace(at,function(t,r,n){var a=[];P.call(r),n.replace(it,function(t,e){e&&a.push(+e)}),e.push([r][S](a))}),e.toString=x._path2string,e});var wt=function(t){var e=wt.ps=wt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var r in e)e[w](r)&&r!=t&&(e[r].sleep--,!e[r].sleep&&delete e[r])}),e[t]};x.findDotsAtSegment=function(t,e,r,n,a,i,s,o,l){var h=1-l,c=j(h,3),u=j(h,2),p=l*l,f=p*l,d=c*t+3*u*l*r+3*h*l*l*a+f*s,x=c*e+3*u*l*n+3*h*l*l*i+f*o,y=t+2*l*(r-t)+p*(a-2*r+t),g=e+2*l*(n-e)+p*(i-2*n+e),v=r+2*l*(a-r)+p*(s-2*a+r),m=n+2*l*(i-n)+p*(o-2*i+n),b=h*t+l*r,w=h*e+l*n,_=h*a+l*s,k=h*i+l*o,C=90-180*L.atan2(y-v,g-m)/D;return(y>v||g<m)&&(C+=180),{x:d,y:x,m:{x:y,y:g},n:{x:v,y:m},start:{x:b,y:w},end:{x:_,y:k},alpha:C}},x.bezierBBox=function(t,e,r,n,a,i,s,o){x.is(t,"array")||(t=[t,e,r,n,a,i,s,o]);var l=At.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},x.isPointInsideBBox=function(t,e,r){return e>=t.x&&e<=t.x2&&r>=t.y&&r<=t.y2},x.isBBoxIntersect=function(t,e){var r=x.isPointInsideBBox;return r(e,t.x,t.y)||r(e,t.x2,t.y)||r(e,t.x,t.y2)||r(e,t.x2,t.y2)||r(t,e.x,e.y)||r(t,e.x2,e.y)||r(t,e.x,e.y2)||r(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},x.pathIntersection=function(t,e){return s(t,e)},x.pathIntersectionNumber=function(t,e){return s(t,e,1)},x.isPointInsidePath=function(t,e,r){var n=x.pathBBox(t);return x.isPointInsideBBox(n,e,r)&&s(t,[["M",e,r],["H",n.x2+10]],1)%2==1},x._removedFactory=function(t){return function(){eve("raphael.log",null,"Rapha\xc3\xabl: you are calling to method \xe2\u20ac\u0153"+t+"\xe2\u20ac\x9d of removed object",t)}};var _t=x.pathBBox=function(t){var e=wt(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var r,n=0,a=0,i=[],s=[],o=0,l=(t=Rt(t)).length;o<l;o++)if("M"==(r=t[o])[0])a=r[2],i.push(n=r[1]),s.push(a);else{var h=At(n,a,r[1],r[2],r[3],r[4],r[5],r[6]);i=i[S](h.min.x,h.max.x),s=s[S](h.min.y,h.max.y),n=r[5],a=r[6]}var c=E[B](0,i),u=E[B](0,s),p=O[B](0,i),f=O[B](0,s),x={x:c,y:u,x2:p,y2:f,width:p-c,height:f-u};return e.bbox=d(x),x},kt=function(t){var e=d(t);return e.toString=x._path2string,e},Ct=x._pathToRelative=function(t){var e=wt(t);if(e.rel)return kt(e.rel);x.is(t,V)&&x.is(t&&t[0],V)||(t=x.parsePathString(t));var r=[],n=0,a=0,i=0,s=0,o=0;"M"==t[0][0]&&(i=n=t[0][1],s=a=t[0][2],o++,r.push(["M",n,a]));for(var l=o,h=t.length;l<h;l++){var c=r[l]=[],u=t[l];if(u[0]!=P.call(u[0]))switch(c[0]=P.call(u[0]),c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-n).toFixed(3),c[7]=+(u[7]-a).toFixed(3);break;case"v":c[1]=+(u[1]-a).toFixed(3);break;case"m":i=u[1],s=u[2];default:for(var p=1,f=u.length;p<f;p++)c[p]=+(u[p]-(p%2?n:a)).toFixed(3)}else{c=r[l]=[],"m"==u[0]&&(i=u[1]+n,s=u[2]+a);for(var d=0,y=u.length;d<y;d++)r[l][d]=u[d]}var g=r[l].length;switch(r[l][0]){case"z":n=i,a=s;break;case"h":n+=+r[l][g-1];break;case"v":a+=+r[l][g-1];break;default:n+=+r[l][g-2],a+=+r[l][g-1]}}return r.toString=x._path2string,e.rel=kt(r),r},Bt=x._pathToAbsolute=function(t){var e=wt(t);if(e.abs)return kt(e.abs);if(x.is(t,V)&&x.is(t&&t[0],V)||(t=x.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r=[],n=0,a=0,i=0,s=0,o=0;"M"==t[0][0]&&(i=n=+t[0][1],s=a=+t[0][2],o++,r[0]=["M",n,a]);for(var l,h,c=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=o,f=t.length;p<f;p++){if(r.push(l=[]),(h=t[p])[0]!=Q.call(h[0]))switch(l[0]=Q.call(h[0]),l[0]){case"A":l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=+(h[6]+n),l[7]=+(h[7]+a);break;case"V":l[1]=+h[1]+a;break;case"H":l[1]=+h[1]+n;break;case"R":for(var d=[n,a][S](h.slice(1)),y=2,g=d.length;y<g;y++)d[y]=+d[y]+n,d[++y]=+d[y]+a;r.pop(),r=r[S](u(d,c));break;case"M":i=+h[1]+n,s=+h[2]+a;default:for(y=1,g=h.length;y<g;y++)l[y]=+h[y]+(y%2?n:a)}else if("R"==h[0])d=[n,a][S](h.slice(1)),r.pop(),r=r[S](u(d,c)),l=["R"][S](h.slice(-2));else for(var v=0,m=h.length;v<m;v++)l[v]=h[v];switch(l[0]){case"Z":n=i,a=s;break;case"H":n=l[1];break;case"V":a=l[1];break;case"M":i=l[l.length-2],s=l[l.length-1];default:n=l[l.length-2],a=l[l.length-1]}}return r.toString=x._path2string,e.abs=kt(r),r},St=function(t,e,r,n){return[t,e,r,n,r,n]},Mt=function(t,e,r,n,a,i){var s=1/3,o=2/3;return[s*t+o*r,s*e+o*n,s*a+o*r,s*i+o*n,a,i]},zt=function(t,e,r,n,a,i,s,o,l,h){var c,u=120*D/180,p=D/180*(+a||0),d=[],x=f(function(t,e,r){return{x:t*L.cos(r)-e*L.sin(r),y:t*L.sin(r)+e*L.cos(r)}});if(h)C=h[0],B=h[1],_=h[2],k=h[3];else{t=(c=x(t,e,-p)).x,e=c.y,o=(c=x(o,l,-p)).x,l=c.y,L.cos(D/180*a),L.sin(D/180*a);var y=(t-o)/2,g=(e-l)/2,v=y*y/(r*r)+g*g/(n*n);v>1&&(r*=v=L.sqrt(v),n*=v);var m=r*r,b=n*n,w=(i==s?-1:1)*L.sqrt(I((m*b-m*g*g-b*y*y)/(m*g*g+b*y*y))),_=w*r*g/n+(t+o)/2,k=w*-n*y/r+(e+l)/2,C=L.asin(((e-k)/n).toFixed(9)),B=L.asin(((l-k)/n).toFixed(9));C=t<_?D-C:C,B=o<_?D-B:B,C<0&&(C=2*D+C),B<0&&(B=2*D+B),s&&C>B&&(C-=2*D),!s&&B>C&&(B-=2*D)}var M=B-C;if(I(M)>u){var z=B,T=o,A=l;o=_+r*L.cos(B=C+u*(s&&B>C?1:-1)),l=k+n*L.sin(B),d=zt(o,l,r,n,a,0,s,T,A,[B,z,_,k])}M=B-C;var N=L.cos(C),F=L.sin(C),P=L.cos(B),O=L.sin(B),E=L.tan(M/4),j=4/3*r*E,q=4/3*n*E,H=[t,e],V=[t+j*F,e-q*N],Y=[o+j*O,l-q*P],W=[o,l];if(V[0]=2*H[0]-V[0],V[1]=2*H[1]-V[1],h)return[V,Y,W][S](d);for(var X=[],G=0,U=(d=[V,Y,W][S](d).join()[R](",")).length;G<U;G++)X[G]=G%2?x(d[G-1],d[G],p).y:x(d[G],d[G+1],p).x;return X},Tt=function(t,e,r,n,a,i,s,o,l){var h=1-l;return{x:j(h,3)*t+3*j(h,2)*l*r+3*h*l*l*a+j(l,3)*s,y:j(h,3)*e+3*j(h,2)*l*n+3*h*l*l*i+j(l,3)*o}},At=f(function(t,e,r,n,a,i,s,o){var l,h=a-2*r+t-(s-2*a+r),c=2*(r-t)-2*(a-r),u=t-r,p=(-c+L.sqrt(c*c-4*h*u))/2/h,f=(-c-L.sqrt(c*c-4*h*u))/2/h,d=[e,o],x=[t,s];return I(p)>"1e12"&&(p=.5),I(f)>"1e12"&&(f=.5),p>0&&p<1&&(l=Tt(t,e,r,n,a,i,s,o,p),x.push(l.x),d.push(l.y)),f>0&&f<1&&(l=Tt(t,e,r,n,a,i,s,o,f),x.push(l.x),d.push(l.y)),p=(-(c=2*(n-e)-2*(i-n))+L.sqrt(c*c-4*(h=i-2*n+e-(o-2*i+n))*(u=e-n)))/2/h,f=(-c-L.sqrt(c*c-4*h*u))/2/h,I(p)>"1e12"&&(p=.5),I(f)>"1e12"&&(f=.5),p>0&&p<1&&(l=Tt(t,e,r,n,a,i,s,o,p),x.push(l.x),d.push(l.y)),f>0&&f<1&&(l=Tt(t,e,r,n,a,i,s,o,f),x.push(l.x),d.push(l.y)),{min:{x:E[B](0,x),y:E[B](0,d)},max:{x:O[B](0,x),y:O[B](0,d)}}}),Rt=x._path2curve=f(function(t,e){var r=!e&&wt(t);if(!e&&r.curve)return kt(r.curve);for(var n=Bt(t),a=e&&Bt(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(t,e){if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][S](zt[B](0,[e.x,e.y][S](t.slice(1))));break;case"S":t=["C",e.x+(e.x-(e.bx||e.x)),e.y+(e.y-(e.by||e.y))][S](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][S](Mt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][S](Mt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][S](St(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][S](St(e.x,e.y,t[1],e.y));break;case"V":t=["C"][S](St(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][S](St(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)t.splice(e++,0,["C"][S](r.splice(0,6)));t.splice(e,1),u=O(n.length,a&&a.length||0)}},h=function(t,e,r,i,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",i.x,i.y]),r.bx=0,r.by=0,r.x=t[s][1],r.y=t[s][2],u=O(n.length,a&&a.length||0))},c=0,u=O(n.length,a&&a.length||0);c<u;c++){n[c]=o(n[c],i),l(n,c),a&&(a[c]=o(a[c],s)),a&&l(a,c),h(n,a,i,s,c),h(a,n,s,i,c);var p=n[c],f=a&&a[c],d=p.length,x=a&&f.length;i.x=p[d-2],i.y=p[d-1],i.bx=$(p[d-4])||i.x,i.by=$(p[d-3])||i.y,s.bx=a&&($(f[x-4])||s.x),s.by=a&&($(f[x-3])||s.y),s.x=a&&f[x-2],s.y=a&&f[x-1]}return a||(r.curve=kt(n)),a?[n,a]:n},null,kt),Nt=(x._parseDots=f(function(t){for(var e=[],r=0,n=t.length;r<n;r++){var a={},i=t[r].match(/^([^:]*):?([\d\.]*)/);if(a.color=x.getRGB(i[1]),a.color.error)return null;a.color=a.color.hex,i[2]&&(a.offset=i[2]+"%"),e.push(a)}for(r=1,n=e.length-1;r<n;r++)if(!e[r].offset){for(var s=$(e[r-1].offset||0),o=0,l=r+1;l<n;l++)if(e[l].offset){o=e[l].offset;break}o||(o=100,l=n);for(var h=((o=$(o))-s)/(l-r+1);r<l;r++)e[r].offset=(s+=h)+"%"}return e}),x._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Ft=(x._tofront=function(t,e){e.top!==t&&(Nt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},x._toback=function(t,e){e.bottom!==t&&(Nt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},x._insertafter=function(t,e,r){Nt(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},x._insertbefore=function(t,e,r){Nt(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},x.toMatrix=function(t,e){var r=_t(t),n={_:{transform:z},getBBox:function(){return r}};return Pt(n,e),n.matrix}),Pt=(x.transformPath=function(t,e){return pt(t,Ft(t,e))},x._extractTransform=function(t,e){if(null==e)return t._.transform;e=A(e).replace(/\.{3}|\u2026/g,t._.transform||z);var r,n,a=x.parseTransformString(e),s=0,o=1,l=1,h=t._,c=new i;if(h.transform=a||[],a)for(var u=0,p=a.length;u<p;u++){var f,d,y,g,v,m=a[u],b=m.length,w=A(m[0]).toLowerCase(),_=m[0]!=w,k=_?c.invert():0;"t"==w&&3==b?_?(f=k.x(0,0),d=k.y(0,0),y=k.x(m[1],m[2]),g=k.y(m[1],m[2]),c.translate(y-f,g-d)):c.translate(m[1],m[2]):"r"==w?2==b?(v=v||t.getBBox(1),c.rotate(m[1],v.x+v.width/2,v.y+v.height/2),s+=m[1]):4==b&&(_?(y=k.x(m[2],m[3]),g=k.y(m[2],m[3]),c.rotate(m[1],y,g)):c.rotate(m[1],m[2],m[3]),s+=m[1]):"s"==w?2==b||3==b?(v=v||t.getBBox(1),c.scale(m[1],m[b-1],v.x+v.width/2,v.y+v.height/2),o*=m[1],l*=m[b-1]):5==b&&(_?(y=k.x(m[3],m[4]),g=k.y(m[3],m[4]),c.scale(m[1],m[2],y,g)):c.scale(m[1],m[2],m[3],m[4]),o*=m[1],l*=m[2]):"m"==w&&7==b&&c.add(m[1],m[2],m[3],m[4],m[5],m[6]),h.dirtyT=1,t.matrix=c}t.matrix=c,h.sx=o,h.sy=l,h.deg=s,h.dx=r=c.e,h.dy=n=c.f,1==o&&1==l&&!s&&h.bbox?(h.bbox.x+=+r,h.bbox.y+=+n):h.dirtyT=1}),Lt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ot=x._equaliseTransform=function(t,e){e=A(e).replace(/\.{3}|\u2026/g,t),t=x.parseTransformString(t)||[],e=x.parseTransformString(e)||[];for(var r,n,a,i,s=O(t.length,e.length),o=[],l=[],h=0;h<s;h++){if(a=t[h]||Lt(e[h]),i=e[h]||Lt(a),a[0]!=i[0]||"r"==a[0].toLowerCase()&&(a[2]!=i[2]||a[3]!=i[3])||"s"==a[0].toLowerCase()&&(a[3]!=i[3]||a[4]!=i[4]))return;for(o[h]=[],l[h]=[],r=0,n=O(a.length,i.length);r<n;r++)r in a&&(o[h][r]=a[r]),r in i&&(l[h][r]=i[r])}return{from:o,to:l}};x._getContainer=function(t,e,r,n){var a;if(null!=(a=null!=n||x.is(t,"object")?t:_.doc.getElementById(t)))return a.tagName?null==e?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:e,height:r}:{container:1,x:t,y:e,width:r,height:n}},x.pathToRelative=Ct,x._engine={},x.path2curve=Rt,x.matrix=function(t,e,r,n,a,s){return new i(t,e,r,n,a,s)},function(t){function e(t){var e=L.sqrt(r(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function r(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,r,n,a,s){var o,l,h,c,u=[[],[],[]],p=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,r,a],[e,n,s],[0,0,1]];for(t&&t instanceof i&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;o<3;o++)for(l=0;l<3;l++){for(c=0,h=0;h<3;h++)c+=p[o][h]*f[h][l];u[o][l]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new i(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,r,n){null==e&&(e=t),(r||n)&&this.add(1,0,0,1,r,n),this.add(t,0,0,e,0,0),(r||n)&&this.add(1,0,0,1,-r,-n)},t.rotate=function(t,e,r){t=x.rad(t),e=e||0,r=r||0;var n=+L.cos(t).toFixed(9),a=+L.sin(t).toFixed(9);this.add(n,a,-a,n,e,r),this.add(1,0,0,1,-e,-r)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[A.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return x.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=L.sqrt(r(n[0])),e(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=L.sqrt(r(n[1])),e(n[1]),t.shear/=t.scaley;var a=-n[0][1],i=n[1][1];return i<0?(t.rotate=x.deg(L.acos(i)),a<0&&(t.rotate=360-t.rotate)):t.rotate=x.deg(L.asin(a)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[R]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:z)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:z)+(e.rotate?"r"+[e.rotate,0,0]:z)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(i.prototype);var Et=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);g.safari="Apple Computer, Inc."==navigator.vendor&&(Et&&Et[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Et&&Et[1]<8?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:function(){};for(var It=function(){this.returnValue=!1},jt=function(){return this.originalEvent.preventDefault()},Dt=function(){this.cancelBubble=!0},qt=function(){return this.originalEvent.stopPropagation()},Ht=_.doc.addEventListener?function(t,e,r,n){var a=M&&F[e]?F[e]:e,i=function(a){var i=a.clientX+(_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft),s=a.clientY+(_.doc.documentElement.scrollTop||_.doc.body.scrollTop);if(M&&F[w](e))for(var o=0,l=a.targetTouches&&a.targetTouches.length;o<l;o++)if(a.targetTouches[o].target==t){var h=a;(a=a.targetTouches[o]).originalEvent=h,a.preventDefault=jt,a.stopPropagation=qt;break}return r.call(n,a,i,s)};return t.addEventListener(a,i,!1),function(){return t.removeEventListener(a,i,!1),!0}}:_.doc.attachEvent?function(t,e,r,n){var a=function(t){var e=(t=t||_.win.event).clientX+(_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft),a=t.clientY+(_.doc.documentElement.scrollTop||_.doc.body.scrollTop);return t.preventDefault=t.preventDefault||It,t.stopPropagation=t.stopPropagation||Dt,r.call(n,t,e,a)};return t.attachEvent("on"+e,a),function(){return t.detachEvent("on"+e,a),!0}}:void 0,Vt=[],Yt=function(t){for(var e,r=t.clientX,n=t.clientY,a=_.doc.documentElement.scrollTop||_.doc.body.scrollTop,i=_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft,s=Vt.length;s--;){if(e=Vt[s],M){for(var o,l=t.touches.length;l--;)if((o=t.touches[l]).identifier==e.el._drag.id){r=o.clientX,n=o.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h,c=e.el.node,u=c.nextSibling,p=c.parentNode,f=c.style.display;_.win.opera&&p.removeChild(c),c.style.display="none",h=e.el.paper.getElementByPoint(r,n),c.style.display=f,_.win.opera&&(u?p.insertBefore(c,u):p.appendChild(c)),h&&eve("raphael.drag.over."+e.el.id,e.el,h),r+=i,n+=a,eve("raphael.drag.move."+e.el.id,e.move_scope||e.el,r-e.el._drag.x,n-e.el._drag.y,r,n,t)}},Wt=function(t){x.unmousemove(Yt).unmouseup(Wt);for(var e,r=Vt.length;r--;)(e=Vt[r]).el._drag={},eve("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);Vt=[]},Xt=x.el={},Gt=N.length;Gt--;)!function(t){x[t]=Xt[t]=function(e,r){return x.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Ht(this.shape||this.node||_.doc,t,e,r||this)})),this},x["un"+t]=Xt["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)if(r[n].name==t&&r[n].f==e)return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(N[Gt]);Xt.data=function(t,e){var r=st[this.id]=st[this.id]||{};if(1==arguments.length){if(x.is(t,"object")){for(var n in t)t[w](n)&&this.data(n,t[n]);return this}return eve("raphael.data.get."+this.id,this,r[t],t),r[t]}return r[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},Xt.removeData=function(t){return null==t?st[this.id]={}:st[this.id]&&delete st[this.id][t],this},Xt.hover=function(t,e,r,n){return this.mouseover(t,r).mouseout(e,n||r)},Xt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Ut=[];Xt.drag=function(t,e,r,n,a,i){function s(s){(s.originalEvent||s).preventDefault();var o=_.doc.documentElement.scrollTop||_.doc.body.scrollTop,l=_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft;this._drag.x=s.clientX+l,this._drag.y=s.clientY+o,this._drag.id=s.identifier,!Vt.length&&x.mousemove(Yt).mouseup(Wt),Vt.push({el:this,move_scope:n,start_scope:a,end_scope:i}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),r&&eve.on("raphael.drag.end."+this.id,r),eve("raphael.drag.start."+this.id,a||n||this,s.clientX+l,s.clientY+o,s)}return this._drag={},Ut.push({el:this,start:s}),this.mousedown(s),this},Xt.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},Xt.undrag=function(){for(var t=Ut.length;t--;)Ut[t].el==this&&(this.unmousedown(Ut[t].start),Ut.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!Ut.length&&x.unmousemove(Yt).unmouseup(Wt)},g.circle=function(t,e,r){var n=x._engine.circle(this,t||0,e||0,r||0);return this.__set__&&this.__set__.push(n),n},g.rect=function(t,e,r,n,a){var i=x._engine.rect(this,t||0,e||0,r||0,n||0,a||0);return this.__set__&&this.__set__.push(i),i},g.ellipse=function(t,e,r,n){var a=x._engine.ellipse(this,t||0,e||0,r||0,n||0);return this.__set__&&this.__set__.push(a),a},g.path=function(t){t&&!x.is(t,H)&&!x.is(t[0],V)&&(t+=z);var e=x._engine.path(x.format[B](x,arguments),this);return this.__set__&&this.__set__.push(e),e},g.image=function(t,e,r,n,a){var i=x._engine.image(this,t||"about:blank",e||0,r||0,n||0,a||0);return this.__set__&&this.__set__.push(i),i},g.text=function(t,e,r){var n=x._engine.text(this,t||0,e||0,A(r));return this.__set__&&this.__set__.push(n),n},g.set=function(t){!x.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new ie(t);return this.__set__&&this.__set__.push(e),e},g.setStart=function(t){this.__set__=t||this.set()},g.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},g.setSize=function(t,e){return x._engine.setSize.call(this,t,e)},g.setViewBox=function(t,e,r,n,a){return x._engine.setViewBox.call(this,t,e,r,n,a)},g.top=g.bottom=null,g.raphael=x,g.getElementByPoint=function(t,e){var r=this,n=r.canvas,a=_.doc.elementFromPoint(t,e);if(_.win.opera&&"svg"==a.tagName){var i=function(t){var e=t.getBoundingClientRect(),r=t.ownerDocument,n=r.body,a=r.documentElement;return{y:e.top+(_.win.pageYOffset||a.scrollTop||n.scrollTop)-(a.clientTop||n.clientTop||0),x:e.left+(_.win.pageXOffset||a.scrollLeft||n.scrollLeft)-(a.clientLeft||n.clientLeft||0)}}(n),s=n.createSVGRect();s.x=t-i.x,s.y=e-i.y,s.width=s.height=1;var o=n.getIntersectionList(s,null);o.length&&(a=o[o.length-1])}if(!a)return null;for(;a.parentNode&&a!=n.parentNode&&!a.raphael;)a=a.parentNode;return a==r.canvas.parentNode&&(a=n),a&&a.raphael?r.getById(a.raphaelid):null},g.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},g.forEach=function(t,e){for(var r=this.bottom;r;){if(!1===t.call(e,r))return this;r=r.next}return this},g.getElementsByPoint=function(t,e){var r=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&r.push(n)}),r},Xt.isPointInside=function(t,e){var r=this.realPath=this.realPath||ut[this.type](this);return x.isPointInsidePath(r,t,e)},Xt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=ut[this.type](this),e.bboxwt=_t(this.realPath),e.bboxwt.toString=a,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=ut[this.type](this)),e.bbox=_t(pt(this.realPath,this.matrix)),e.bbox.toString=a,e.dirty=e.dirtyT=0),e.bbox)},Xt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Xt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},r=e.width/2,n=this.paper,a=n.set(),i=this.realPath||ut[this.type](this);i=this.matrix?pt(i,this.matrix):i;for(var s=1;s<r+1;s++)a.push(n.path(i).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/r*s).toFixed(3),opacity:+(e.opacity/r).toFixed(3)}));return a.insertBefore(this).translate(e.offsetx,e.offsety)};var $t=function(t,e,r,n,a,i,s,o,l){return null==l?h(t,e,r,n,a,i,s,o):x.findDotsAtSegment(t,e,r,n,a,i,s,o,function(t,e,r,n,a,i,s,o,l){if(!(l<0||h(t,e,r,n,a,i,s,o)<l)){var c,u=.5,p=1-u;for(c=h(t,e,r,n,a,i,s,o,p);I(c-l)>.01;)u/=2,c=h(t,e,r,n,a,i,s,o,p+=(c<l?1:-1)*u);return p}}(t,e,r,n,a,i,s,o,l))},Zt=function(t,e){return function(r,n,a){for(var i,s,o,l,h,c="",u={},p=0,f=0,d=(r=Rt(r)).length;f<d;f++){if("M"==(o=r[f])[0])i=+o[1],s=+o[2];else{if(p+(l=$t(i,s,o[1],o[2],o[3],o[4],o[5],o[6]))>n){if(e&&!u.start){if(c+=["C"+(h=$t(i,s,o[1],o[2],o[3],o[4],o[5],o[6],n-p)).start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],a)return c;u.start=c,c=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,o[5],o[6]].join(),p+=l,i=+o[5],s=+o[6];continue}if(!t&&!e)return{x:(h=$t(i,s,o[1],o[2],o[3],o[4],o[5],o[6],n-p)).x,y:h.y,alpha:h.alpha}}p+=l,i=+o[5],s=+o[6]}c+=o.shift()+o}return u.end=c,(h=t?p:e?u:x.findDotsAtSegment(i,s,o[0],o[1],o[2],o[3],o[4],o[5],1)).alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},Qt=Zt(1),Jt=Zt(),Kt=Zt(0,1);x.getTotalLength=Qt,x.getPointAtLength=Jt,x.getSubpath=function(t,e,r){if(this.getTotalLength(t)-r<1e-6)return Kt(t,e).end;var n=Kt(t,r,1);return e?Kt(n,e).end:n},Xt.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Qt(this.attrs.path)},Xt.getPointAtLength=function(t){if("path"==this.type)return Jt(this.attrs.path,t)},Xt.getSubpath=function(t,e){if("path"==this.type)return x.getSubpath(this.attrs.path,t,e)};var te=x.easing_formulas={linear:function(t){return t},"<":function(t){return j(t,1.7)},">":function(t){return j(t,.48)},"<>":function(t){var e=.48-t/1.04,r=L.sqrt(.1734+e*e),n=r-e,a=-r-e,i=j(I(n),1/3)*(n<0?-1:1)+j(I(a),1/3)*(a<0?-1:1)+.5;return 3*(1-i)*i*i+i*i*i},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:j(2,-10*t)*L.sin(2*(t-.075)*D/.3)+1},bounce:function(t){var e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375}};te.easeIn=te["ease-in"]=te["<"],te.easeOut=te["ease-out"]=te[">"],te.easeInOut=te["ease-in-out"]=te["<>"],te["back-in"]=te.backIn,te["back-out"]=te.backOut;var ee=[],re=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},ne=function(){for(var t=+new Date,r=0;r<ee.length;r++){var n=ee[r];if(!n.el.removed&&!n.paused){var a,i,s=t-n.start,o=n.ms,l=n.easing,h=n.from,c=n.diff,u=n.to,p=n.el,f={},d={};if(n.initstatus?(s=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*o,n.status=n.initstatus,delete n.initstatus,n.stop&&ee.splice(r--,1)):n.status=(n.prev+s/o*(n.percent-n.prev))/n.anim.top,!(s<0))if(s<o){var y=l(s/o);for(var g in h)if(h[w](g)){switch(K[g]){case q:a=+h[g]+y*o*c[g];break;case"colour":a="rgb("+[ae(U(h[g].r+y*o*c[g].r)),ae(U(h[g].g+y*o*c[g].g)),ae(U(h[g].b+y*o*c[g].b))].join(",")+")";break;case"path":a=[];for(var v=0,m=h[g].length;v<m;v++){a[v]=[h[g][v][0]];for(var b=1,_=h[g][v].length;b<_;b++)a[v][b]=+h[g][v][b]+y*o*c[g][v][b];a[v]=a[v].join(T)}a=a.join(T);break;case"transform":if(c[g].real)for(a=[],v=0,m=h[g].length;v<m;v++)for(a[v]=[h[g][v][0]],b=1,_=h[g][v].length;b<_;b++)a[v][b]=h[g][v][b]+y*o*c[g][v][b];else{var k=function(t){return+h[g][t]+y*o*c[g][t]};a=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==g)for(a=[],v=4;v--;)a[v]=+h[g][v]+y*o*c[g][v];break;default:var C=[][S](h[g]);for(a=[],v=p.paper.customAttributes[g].length;v--;)a[v]=+C[v]+y*o*c[g][v]}f[g]=a}p.attr(f),function(t,e,r){setTimeout(function(){eve("raphael.anim.frame."+t,e,r)})}(p.id,p,n.anim)}else{if(function(t,e,r){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,r),eve("raphael.anim.finish."+e.id,e,r),x.is(t,"function")&&t.call(e)})}(n.callback,p,n.anim),p.attr(u),ee.splice(r--,1),n.repeat>1&&!n.next){for(i in u)u[w](i)&&(d[i]=n.totalOrigin[i]);n.el.attr(d),e(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&e(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}x.svg&&p&&p.paper&&p.paper.safari(),ee.length&&re(ne)},ae=function(t){return t>255?255:t<0?0:t};Xt.animateWith=function(t,n,a,i,s,o){var l=this;if(l.removed)return o&&o.call(l),l;var h=a instanceof r?a:x.animation(a,i,s,o);e(h,l,h.percents[0],null,l.attr());for(var c=0,u=ee.length;c<u;c++)if(ee[c].anim==n&&ee[c].el==t){ee[u-1].start=ee[c].start;break}return l},Xt.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},r.prototype.delay=function(t){var e=new r(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},r.prototype.repeat=function(t){var e=new r(this.anim,this.ms);return e.del=this.del,e.times=L.floor(O(t,0))||1,e},x.animation=function(t,e,n,a){if(t instanceof r)return t;!x.is(n,"function")&&n||(a=a||n||null,n=null),t=Object(t),e=+e||0;var i,s,o={};for(s in t)t[w](s)&&$(s)!=s&&$(s)+"%"!=s&&(i=!0,o[s]=t[s]);return i?(n&&(o.easing=n),a&&(o.callback=a),new r({100:o},e)):new r(t,e)},Xt.animate=function(t,n,a,i){var s=this;if(s.removed)return i&&i.call(s),s;var o=t instanceof r?t:x.animation(t,n,a,i);return e(o,s,o.percents[0],null,s.attr()),s},Xt.setTime=function(t,e){return t&&null!=e&&this.status(t,E(e,t.ms)/t.ms),this},Xt.status=function(t,r){var n,a,i=[],s=0;if(null!=r)return e(t,this,-1,E(r,1)),this;for(n=ee.length;s<n;s++)if((a=ee[s]).el.id==this.id&&(!t||a.anim==t)){if(t)return a.status;i.push({anim:a.anim,status:a.status})}return t?0:i},Xt.pause=function(t){for(var e=0;e<ee.length;e++)ee[e].el.id==this.id&&(!t||ee[e].anim==t)&&!1!==eve("raphael.anim.pause."+this.id,this,ee[e].anim)&&(ee[e].paused=!0);return this},Xt.resume=function(t){for(var e=0;e<ee.length;e++)if(ee[e].el.id==this.id&&(!t||ee[e].anim==t)){var r=ee[e];!1!==eve("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},Xt.stop=function(t){for(var e=0;e<ee.length;e++)ee[e].el.id==this.id&&(!t||ee[e].anim==t)&&!1!==eve("raphael.anim.stop."+this.id,this,ee[e].anim)&&ee.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),Xt.toString=function(){return"Rapha\xc3\xabl\xe2\u20ac\u2122s object"};var ie=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,r=t.length;e<r;e++)t[e]&&(t[e].constructor==Xt.constructor||t[e].constructor==ie)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},se=ie.prototype;for(var oe in se.push=function(){for(var t,e,r=0,n=arguments.length;r<n;r++)(t=arguments[r])&&(t.constructor==Xt.constructor||t.constructor==ie)&&(this[e=this.items.length]=this.items[e]=t,this.length++);return this},se.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},se.forEach=function(t,e){for(var r=0,n=this.items.length;r<n;r++)if(!1===t.call(e,this.items[r],r))return this;return this},Xt)Xt[w](oe)&&(se[oe]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t][B](r,e)})}}(oe));se.attr=function(t,e){if(t&&x.is(t,V)&&x.is(t[0],"object"))for(var r=0,n=t.length;r<n;r++)this.items[r].attr(t[r]);else for(var a=0,i=this.items.length;a<i;a++)this.items[a].attr(t,e);return this},se.clear=function(){for(;this.length;)this.pop()},se.splice=function(t,e,r){t=t<0?O(this.length+t,0):t,e=O(0,E(this.length-t,e));var n,a=[],i=[],s=[];for(n=2;n<arguments.length;n++)s.push(arguments[n]);for(n=0;n<e;n++)i.push(this[t+n]);for(;n<this.length-t;n++)a.push(this[t+n]);var o=s.length;for(n=0;n<o+a.length;n++)this.items[t+n]=this[t+n]=n<o?s[n]:a[n-o];for(n=this.items.length=this.length-=e-o;this[n];)delete this[n++];return new ie(i)},se.exclude=function(t){for(var e=0,r=this.length;e<r;e++)if(this[e]==t)return this.splice(e,1),!0},se.animate=function(t,e,r,n){(x.is(r,"function")||!r)&&(n=r||null);var a,i,s=this.items.length,o=s,l=this;if(!s)return this;n&&(i=function(){!--s&&n.call(l)}),r=x.is(r,H)?r:i;var h=x.animation(t,e,r,i);for(a=this.items[--o].animate(h);o--;)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(a,h,h);return this},se.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},se.getBBox=function(){for(var t=[],e=[],r=[],n=[],a=this.items.length;a--;)if(!this.items[a].removed){var i=this.items[a].getBBox();t.push(i.x),e.push(i.y),r.push(i.x+i.width),n.push(i.y+i.height)}return{x:t=E[B](0,t),y:e=E[B](0,e),x2:r=O[B](0,r),y2:n=O[B](0,n),width:r-t,height:n-e}},se.clone=function(t){t=new ie;for(var e=0,r=this.items.length;e<r;e++)t.push(this.items[e].clone());return t},se.toString=function(){return"Rapha\xc3\xabl\xe2\u20ac\u02dcs set"},x.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var n in t.face)t.face[w](n)&&(e.face[n]=t.face[n]);if(this.fonts[r]?this.fonts[r].push(e):this.fonts[r]=[e],!t.svg)for(var a in e.face["units-per-em"]=Z(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[w](a)){var i=t.glyphs[a];if(e.glyphs[a]={w:i.w,k:{},d:i.d&&"M"+i.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},i.k)for(var s in i.k)i[w](s)&&(e.glyphs[a].k[s]=i.k[s])}return t},g.getFont=function(t,e,r,n){if(n=n||"normal",r=r||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,x.fonts){var a,i=x.fonts[t];if(!i){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,z)+"(\\s|$)","i");for(var o in x.fonts)if(x.fonts[w](o)&&s.test(o)){i=x.fonts[o];break}}if(i)for(var l=0,h=i.length;l<h&&((a=i[l]).face["font-weight"]!=e||a.face["font-style"]!=r&&a.face["font-style"]||a.face["font-stretch"]!=n);l++);return a}},g.print=function(t,e,r,n,a,i,s){i=i||"middle",s=O(E(s||0,1),-1);var o,l=A(r)[R](z),h=0,c=0,u=z;if(x.is(n,r)&&(n=this.getFont(n)),n){o=(a||16)/n.face["units-per-em"];for(var p=n.face.bbox[R](v),f=+p[0],d=p[3]-p[1],y=0,g=+p[1]+("baseline"==i?d+ +n.face.descent:d/2),m=0,b=l.length;m<b;m++){if("\n"==l[m])h=0,_=0,c=0,y+=d;else{var w=c&&n.glyphs[l[m-1]]||{},_=n.glyphs[l[m]];h+=c?(w.w||n.w)+(w.k&&w.k[l[m]]||0)+n.w*s:0,c=1}_&&_.d&&(u+=x.transformPath(_.d,["t",h*o,y*o,"s",o,o,f,g,"t",(t-f)/o,(e-g)/o]))}}return this.path(u).attr({fill:"#000",stroke:"none"})},g.add=function(t){if(x.is(t,"array"))for(var e,r=this.set(),n=0,a=t.length;n<a;n++)m[w]((e=t[n]||{}).type)&&r.push(this[e.type]().attr(e));return r},x.format=function(t,e){var r=x.is(e,V)?[0][S](e):arguments;return t&&x.is(t,H)&&r.length-1&&(t=t.replace(b,function(t,e){return null==r[++e]?z:r[e]})),t||z},x.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(t,r,n){var a=n;return r.replace(e,function(t,e,r,n,i){e=e||n,a&&(e in a&&(a=a[e]),"function"==typeof a&&i&&(a=a()))}),a=(null==a||a==n?t:a)+""};return function(e,n){return String(e).replace(t,function(t,e){return r(t,e,n)})}}(),x.ninja=function(){return k.was?_.win.Raphael=k.is:delete Raphael,x},x.st=se,function(t,e,r){null==t.readyState&&t.addEventListener&&(t.addEventListener(e,r=function(){t.removeEventListener(e,r,!1),t.readyState="complete"},!1),t.readyState="loading"),function e(){/in/.test(t.readyState)?setTimeout(e,9):x.eve("raphael.DOMload")}()}(document,"DOMContentLoaded"),k.was?_.win.Raphael=x:Raphael=x,eve.on("raphael.DOMload",function(){y=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",r=String,n=parseFloat,a=parseInt,i=Math,s=i.max,o=i.abs,l=i.pow,h=/[, ]+/,c=t.eve,u="",p=" ",f="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},x={};t.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xc3\xabl "+this.version};var y=function(n,a){if(a)for(var i in"string"==typeof n&&(n=y(n)),a)a[e](i)&&("xlink:"==i.substring(0,6)?n.setAttributeNS(f,i.substring(6),r(a[i])):n.setAttribute(i,r(a[i])));else(n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},g=function(e,a){var h="linear",c=e.id+a,p=.5,f=.5,d=e.node,x=e.paper,g=d.style,v=t._g.doc.getElementById(c);if(!v){if(a=(a=r(a).replace(t._radial_gradient,function(t,e,r){if(h="radial",e&&r){p=n(e);var a=2*((f=n(r))>.5)-1;l(p-.5,2)+l(f-.5,2)>.25&&(f=i.sqrt(.25-l(p-.5,2))*a+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*a)}return u})).split(/\s*\-\s*/),"linear"==h){var m=a.shift();if(m=-n(m),isNaN(m))return null;var b=[0,0,i.cos(t.rad(m)),i.sin(t.rad(m))],w=1/(s(o(b[2]),o(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var _=t._parseDots(a);if(!_)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&c!=e.gradient.id&&(x.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){v=y(h+"Gradient",{id:c}),e.gradient=v,y(v,"radial"==h?{fx:p,fy:f}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),x.defs.appendChild(v);for(var k=0,C=_.length;k<C;k++)v.appendChild(y("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}return y(d,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),g.fill=u,g.opacity=1,g.fillOpacity=1,1},v=function(t){var e=t.getBBox(1);y(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},m=function(n,a,i){if("path"==n.type){for(var s,o,l,h,c,p=r(a).toLowerCase().split("-"),f=n.paper,g=i?"end":"start",v=n.node,m=n.attrs,b=m["stroke-width"],w=p.length,_="classic",k=3,C=3,B=5;w--;)switch(p[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=p[w];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==_?(k+=2,C+=2,B+=2,l=1,h=i?4:1,c={fill:"none",stroke:m.stroke}):(h=l=k/2,c={fill:m.stroke,stroke:"none"}),n._.arrows?i?(n._.arrows.endPath&&x[n._.arrows.endPath]--,n._.arrows.endMarker&&x[n._.arrows.endMarker]--):(n._.arrows.startPath&&x[n._.arrows.startPath]--,n._.arrows.startMarker&&x[n._.arrows.startMarker]--):n._.arrows={},"none"!=_){var S="raphael-marker-"+_,M="raphael-marker-"+g+_+k+C;t._g.doc.getElementById(S)?x[S]++:(f.defs.appendChild(y(y("path"),{"stroke-linecap":"round",d:d[_],id:S})),x[S]=1);var z,T=t._g.doc.getElementById(M);T?(x[M]++,z=T.getElementsByTagName("use")[0]):(T=y(y("marker"),{id:M,markerHeight:C,markerWidth:k,orient:"auto",refX:h,refY:C/2}),z=y(y("use"),{"xlink:href":"#"+S,transform:(i?"rotate(180 "+k/2+" "+C/2+") ":u)+"scale("+k/B+","+C/B+")","stroke-width":(1/((k/B+C/B)/2)).toFixed(4)}),T.appendChild(z),f.defs.appendChild(T),x[M]=1),y(z,c);var A=l*("diamond"!=_&&"oval"!=_);i?(s=n._.arrows.startdx*b||0,o=t.getTotalLength(m.path)-A*b):(s=A*b,o=t.getTotalLength(m.path)-(n._.arrows.enddx*b||0)),(c={})["marker-"+g]="url(#"+M+")",(o||s)&&(c.d=Raphael.getSubpath(m.path,s,o)),y(v,c),n._.arrows[g+"Path"]=S,n._.arrows[g+"Marker"]=M,n._.arrows[g+"dx"]=A,n._.arrows[g+"Type"]=_,n._.arrows[g+"String"]=a}else i?(s=n._.arrows.startdx*b||0,o=t.getTotalLength(m.path)-s):(s=0,o=t.getTotalLength(m.path)-(n._.arrows.enddx*b||0)),n._.arrows[g+"Path"]&&y(v,{d:Raphael.getSubpath(m.path,s,o)}),delete n._.arrows[g+"Path"],delete n._.arrows[g+"Marker"],delete n._.arrows[g+"dx"],delete n._.arrows[g+"Type"],delete n._.arrows[g+"String"];for(c in x)if(x[e](c)&&!x[c]){var R=t._g.doc.getElementById(c);R&&R.parentNode.removeChild(R)}}},b={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,n){if(e=b[r(e).toLowerCase()]){for(var a=t.attrs["stroke-width"]||"1",i={round:a,square:a,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,s=[],o=e.length;o--;)s[o]=e[o]*a+(o%2?1:-1)*i;y(t.node,{"stroke-dasharray":s.join(",")})}},_=function(n,i){var l=n.node,c=n.attrs,p=l.style.visibility;for(var d in l.style.visibility="hidden",i)if(i[e](d)){if(!t._availableAttrs[e](d))continue;var x=i[d];switch(c[d]=x,d){case"blur":n.blur(x);break;case"href":case"title":case"target":var b=l.parentNode;if("a"!=b.tagName.toLowerCase()){var _=y("a");b.insertBefore(_,l),_.appendChild(l),b=_}"target"==d?b.setAttributeNS(f,"show","blank"==x?"new":x):b.setAttributeNS(f,d,x);break;case"cursor":l.style.cursor=x;break;case"transform":n.transform(x);break;case"arrow-start":m(n,x);break;case"arrow-end":m(n,x,1);break;case"clip-rect":var C=r(x).split(h);if(4==C.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var B=y("clipPath"),S=y("rect");B.id=t.createUUID(),y(S,{x:C[0],y:C[1],width:C[2],height:C[3]}),B.appendChild(S),n.paper.defs.appendChild(B),y(l,{"clip-path":"url(#"+B.id+")"}),n.clip=S}if(!x){var M=l.getAttribute("clip-path");if(M){var z=t._g.doc.getElementById(M.replace(/(^url\(#|\)$)/g,u));z&&z.parentNode.removeChild(z),y(l,{"clip-path":u}),delete n.clip}}break;case"path":"path"==n.type&&(y(l,{d:x?c.path=t._pathToAbsolute(x):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&m(n,n._.arrows.startString),"endString"in n._.arrows&&m(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(d,x),n._.dirty=1,!c.fx)break;d="x",x=c.x;case"x":c.fx&&(x=-c.x-(c.width||0));case"rx":if("rx"==d&&"rect"==n.type)break;case"cx":l.setAttribute(d,x),n.pattern&&v(n),n._.dirty=1;break;case"height":if(l.setAttribute(d,x),n._.dirty=1,!c.fy)break;d="y",x=c.y;case"y":c.fy&&(x=-c.y-(c.height||0));case"ry":if("ry"==d&&"rect"==n.type)break;case"cy":l.setAttribute(d,x),n.pattern&&v(n),n._.dirty=1;break;case"r":"rect"==n.type?y(l,{rx:x,ry:x}):l.setAttribute(d,x),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(f,"href",x);break;case"stroke-width":1==n._.sx&&1==n._.sy||(x/=s(o(n._.sx),o(n._.sy))||1),n.paper._vbSize&&(x*=n.paper._vbSize),l.setAttribute(d,x),c["stroke-dasharray"]&&w(n,c["stroke-dasharray"],i),n._.arrows&&("startString"in n._.arrows&&m(n,n._.arrows.startString),"endString"in n._.arrows&&m(n,n._.arrows.endString,1));break;case"stroke-dasharray":w(n,x,i);break;case"fill":var T=r(x).match(t._ISURL);if(T){B=y("pattern");var A=y("image");B.id=t.createUUID(),y(B,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),y(A,{x:0,y:0,"xlink:href":T[1]}),B.appendChild(A),function(e){t._preload(T[1],function(){var t=this.offsetWidth,r=this.offsetHeight;y(e,{width:t,height:r}),y(A,{width:t,height:r}),n.paper.safari()})}(B),n.paper.defs.appendChild(B),y(l,{fill:"url(#"+B.id+")"}),n.pattern=B,n.pattern&&v(n);break}var R=t.getRGB(x);if(R.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=r(x).charAt())&&g(n,x)){if("opacity"in c||"fill-opacity"in c){var N=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(N){var F=N.getElementsByTagName("stop");y(F[F.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=x,c.fill="none";break}}else delete i.gradient,delete c.gradient,!t.is(c.opacity,"undefined")&&t.is(i.opacity,"undefined")&&y(l,{opacity:c.opacity}),!t.is(c["fill-opacity"],"undefined")&&t.is(i["fill-opacity"],"undefined")&&y(l,{"fill-opacity":c["fill-opacity"]});R[e]("opacity")&&y(l,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=t.getRGB(x),l.setAttribute(d,R.hex),"stroke"==d&&R[e]("opacity")&&y(l,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity}),"stroke"==d&&n._.arrows&&("startString"in n._.arrows&&m(n,n._.arrows.startString),"endString"in n._.arrows&&m(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=r(x).charAt())&&g(n,x);break;case"opacity":c.gradient&&!c[e]("stroke-opacity")&&y(l,{"stroke-opacity":x>1?x/100:x});case"fill-opacity":if(c.gradient){(N=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)))&&(F=N.getElementsByTagName("stop"),y(F[F.length-1],{"stop-opacity":x}));break}default:"font-size"==d&&(x=a(x,10)+"px");var P=d.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[P]=x,n._.dirty=1,l.setAttribute(d,x)}}k(n,i),l.style.visibility=p},k=function(n,i){if("text"==n.type&&(i[e]("text")||i[e]("font")||i[e]("font-size")||i[e]("x")||i[e]("y"))){var s=n.attrs,o=n.node,l=o.firstChild?a(t._g.doc.defaultView.getComputedStyle(o.firstChild,u).getPropertyValue("font-size"),10):10;if(i[e]("text")){for(s.text=i.text;o.firstChild;)o.removeChild(o.firstChild);for(var h,c=r(i.text).split("\n"),p=[],f=0,d=c.length;f<d;f++)h=y("tspan"),f&&y(h,{dy:1.2*l,x:s.x}),h.appendChild(t._g.doc.createTextNode(c[f])),o.appendChild(h),p[f]=h}else for(f=0,d=(p=o.getElementsByTagName("tspan")).length;f<d;f++)f?y(p[f],{dy:1.2*l,x:s.x}):y(p[0],{dy:0});y(o,{x:s.x,y:s.y}),n._.dirty=1;var x=n._getBBox(),g=s.y-(x.y+x.height/2);g&&t.is(g,"finite")&&y(p[0],{dy:g})}},C=function(e,r){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=r,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},B=t.el;C.prototype=B,B.constructor=C,t._engine.path=function(t,e){var r=y("path");e.canvas&&e.canvas.appendChild(r);var n=new C(r,e);return n.type="path",_(n,{fill:"none",stroke:"#000",path:t}),n},B.rotate=function(t,e,a){if(this.removed)return this;if((t=r(t).split(h)).length-1&&(e=n(t[1]),a=n(t[2])),t=n(t[0]),null==a&&(e=a),null==e||null==a){var i=this.getBBox(1);e=i.x+i.width/2,a=i.y+i.height/2}return this.transform(this._.transform.concat([["r",t,e,a]])),this},B.scale=function(t,e,a,i){if(this.removed)return this;if((t=r(t).split(h)).length-1&&(e=n(t[1]),a=n(t[2]),i=n(t[3])),t=n(t[0]),null==e&&(e=t),null==i&&(a=i),null==a||null==i)var s=this.getBBox(1);return this.transform(this._.transform.concat([["s",t,e,a=null==a?s.x+s.width/2:a,i=null==i?s.y+s.height/2:i]])),this},B.translate=function(t,e){return this.removed?this:((t=r(t).split(h)).length-1&&(e=n(t[1])),t=n(t[0])||0,this.transform(this._.transform.concat([["t",t,e=+e||0]])),this)},B.transform=function(r){var n=this._;if(null==r)return n.transform;if(t._extractTransform(this,r),this.clip&&y(this.clip,{transform:this.matrix.invert()}),this.pattern&&v(this),this.node&&y(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var a=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":a})}return this},B.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},B.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},B.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;for(var r in e.__set__&&e.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[r]="function"==typeof this[r]?t._removedFactory(r):null;this.removed=!0}},B._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},B.attr=function(r,n){if(this.removed)return this;if(null==r){var a={};for(var i in this.attrs)this.attrs[e](i)&&(a[i]=this.attrs[i]);return a.gradient&&"none"==a.fill&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(null==n&&t.is(r,"string")){if("fill"==r&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==r)return this._.transform;for(var s=r.split(h),o={},l=0,u=s.length;l<u;l++)o[r=s[l]]=r in this.attrs?this.attrs[r]:t.is(this.paper.customAttributes[r],"function")?this.paper.customAttributes[r].def:t._availableAttrs[r];return u-1?o:o[s[0]]}if(null==n&&t.is(r,"array")){for(o={},l=0,u=r.length;l<u;l++)o[r[l]]=this.attr(r[l]);return o}if(null!=n){var p={};p[r]=n}else null!=r&&t.is(r,"object")&&(p=r);for(var f in p)c("raphael.attr."+f+"."+this.id,this,p[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&p[e](f)&&t.is(this.paper.customAttributes[f],"function")){var d=this.paper.customAttributes[f].apply(this,[].concat(p[f]));for(var x in this.attrs[f]=p[f],d)d[e](x)&&(p[x]=d[x])}return _(this,p),this},B.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},B.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;return"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper),this},B.insertAfter=function(e){if(this.removed)return this;var r=e.node||e[e.length-1].node;return r.nextSibling?r.parentNode.insertBefore(this.node,r.nextSibling):r.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},B.insertBefore=function(e){if(this.removed)return this;var r=e.node||e[0].node;return r.parentNode.insertBefore(this.node,r),t._insertbefore(this,e,this.paper),this},B.blur=function(e){var r=this;if(0!=+e){var n=y("filter"),a=y("feGaussianBlur");r.attrs.blur=e,n.id=t.createUUID(),y(a,{stdDeviation:+e||1.5}),n.appendChild(a),r.paper.defs.appendChild(n),r._blur=n,y(r.node,{filter:"url(#"+n.id+")"})}else r._blur&&(r._blur.parentNode.removeChild(r._blur),delete r._blur,delete r.attrs.blur),r.node.removeAttribute("filter")},t._engine.circle=function(t,e,r,n){var a=y("circle");t.canvas&&t.canvas.appendChild(a);var i=new C(a,t);return i.attrs={cx:e,cy:r,r:n,fill:"none",stroke:"#000"},i.type="circle",y(a,i.attrs),i},t._engine.rect=function(t,e,r,n,a,i){var s=y("rect");t.canvas&&t.canvas.appendChild(s);var o=new C(s,t);return o.attrs={x:e,y:r,width:n,height:a,r:i||0,rx:i||0,ry:i||0,fill:"none",stroke:"#000"},o.type="rect",y(s,o.attrs),o},t._engine.ellipse=function(t,e,r,n,a){var i=y("ellipse");t.canvas&&t.canvas.appendChild(i);var s=new C(i,t);return s.attrs={cx:e,cy:r,rx:n,ry:a,fill:"none",stroke:"#000"},s.type="ellipse",y(i,s.attrs),s},t._engine.image=function(t,e,r,n,a,i){var s=y("image");y(s,{x:r,y:n,width:a,height:i,preserveAspectRatio:"none"}),s.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(s);var o=new C(s,t);return o.attrs={x:r,y:n,width:a,height:i,src:e},o.type="image",o},t._engine.text=function(e,r,n,a){var i=y("text");e.canvas&&e.canvas.appendChild(i);var s=new C(i,e);return s.attrs={x:r,y:n,"text-anchor":"middle",text:a,font:t._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",_(s,s.attrs),s},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),r=e&&e.container,n=e.x,a=e.y,i=e.width,s=e.height;if(!r)throw new Error("SVG container not found.");var o,l=y("svg"),h="overflow:hidden;";return n=n||0,a=a||0,i=i||512,y(l,{height:s=s||342,version:1.1,width:i,xmlns:"http://www.w3.org/2000/svg"}),1==r?(l.style.cssText=h+"position:absolute;left:"+n+"px;top:"+a+"px",t._g.doc.body.appendChild(l),o=1):(l.style.cssText=h+"position:relative",r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l)),(r=new t._Paper).width=i,r.height=s,r.canvas=l,r.clear(),r._left=r._top=0,o&&(r.renderfix=function(){}),r.renderfix(),r},t._engine.setViewBox=function(t,e,r,n,a){c("raphael.setViewBox",this,this._viewBox,[t,e,r,n,a]);var i,o=s(r/this.width,n/this.height),l=this.top,h=a?"meet":"xMinYMin";for(null==t?(this._vbSize&&(o=1),delete this._vbSize,i="0 0 "+this.width+p+this.height):(this._vbSize=o,i=t+p+e+p+r+p+n),y(this.canvas,{viewBox:i,preserveAspectRatio:h});o&&l;)l.attr({"stroke-width":"stroke-width"in l.attrs?l.attrs["stroke-width"]:1}),l._.dirty=1,l._.dirtyT=1,l=l.prev;return this._viewBox=[t,e,r,n,!!a],this},t.prototype.renderfix=function(){var t,e=this.canvas,r=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(r){t=e.createSVGMatrix()}var n=-t.e%1,a=-t.f%1;(n||a)&&(n&&(this._left=(this._left+n)%1,r.left=this._left+"px"),a&&(this._top=(this._top+a)%1,r.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=y("desc")).appendChild(t._g.doc.createTextNode("Created with Rapha\xc3\xabl "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=y("defs"))},t.prototype.remove=function(){for(var e in c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var S=t.st;for(var M in B)B[e](M)&&!S[e](M)&&(S[M]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(M))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",r=String,n=parseFloat,a=Math,i=a.round,s=a.max,o=a.min,l=a.abs,h="fill",c=/[, ]+/,u=t.eve,p=" ",f="",d={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},x=/([clmz]),?([^clmz]*)/gi,y=/ progid:\S+Blur\([^\)]+\)/g,g=/-?[^,\s-]+/g,v="position:absolute;left:0;top:0;width:1px;height:1px",m=21600,b={path:1,rect:1,image:1},w={circle:1,ellipse:1},_=function(e){var n=/[ahqstv]/gi,a=t._pathToAbsolute;if(r(e).match(n)&&(a=t._path2curve),n=/[clmz]/g,a==t._pathToAbsolute&&!r(e).match(n)){var s=r(e).replace(x,function(t,e,r){var n=[],a="m"==e.toLowerCase(),s=d[e];return r.replace(g,function(t){a&&2==n.length&&(s+=n+d["m"==e?"l":"L"],n=[]),n.push(i(t*m))}),s+n});return s}var o,l,h=a(e);s=[];for(var c=0,u=h.length;c<u;c++){o=h[c],"z"==(l=h[c][0].toLowerCase())&&(l="x");for(var y=1,v=o.length;y<v;y++)l+=i(o[y]*m)+(y!=v-1?",":f);s.push(l)}return s.join(p)},k=function(e,r,n){var a=t.matrix();return a.rotate(-e,.5,.5),{dx:a.x(r,n),dy:a.y(r,n)}},C=function(t,e,r,n,a,i){var s=t._,o=t.matrix,c=s.fillpos,u=t.node,f=u.style,d=1,x="",y=m/e,g=m/r;if(f.visibility="hidden",e&&r){if(u.coordsize=l(y)+p+l(g),f.rotation=i*(e*r<0?-1:1),i){var v=k(i,n,a);n=v.dx,a=v.dy}if(e<0&&(x+="x"),r<0&&(x+=" y")&&(d=-1),f.flip=x,u.coordorigin=n*-y+p+a*-g,c||s.fillsize){var b=u.getElementsByTagName(h);u.removeChild(b=b&&b[0]),c&&(v=k(i,o.x(c[0],c[1]),o.y(c[0],c[1])),b.position=v.dx*d+p+v.dy*d),s.fillsize&&(b.size=s.fillsize[0]*l(e)+p+s.fillsize[1]*l(r)),u.appendChild(b)}f.visibility="visible"}};t.toString=function(){return"Your browser doesn\xe2\u20ac\u2122t support SVG. Falling down to VML.\nYou are running Rapha\xc3\xabl "+this.version};var B,S=function(t,e,n){for(var a=r(e).toLowerCase().split("-"),i=n?"end":"start",s=a.length,o="classic",l="medium",h="medium";s--;)switch(a[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=a[s];break;case"wide":case"narrow":h=a[s];break;case"long":case"short":l=a[s]}var c=t.node.getElementsByTagName("stroke")[0];c[i+"arrow"]=o,c[i+"arrowlength"]=l,c[i+"arrowwidth"]=h},M=function(a,l){a.attrs=a.attrs||{};var u=a.node,d=a.attrs,x=u.style,y=b[a.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),g=w[a.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),v=a;for(var k in l)l[e](k)&&(d[k]=l[k]);if(y&&(d.path=t._getPath[a.type](a),a._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(x.cursor=l.cursor),"blur"in l&&a.blur(l.blur),(l.path&&"path"==a.type||y)&&(u.path=_(~r(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),"image"==a.type&&(a._.fillpos=[d.x,d.y],a._.fillsize=[d.width,d.height],C(a,1,1,0,0,0))),"transform"in l&&a.transform(l.transform),g){var M=+d.cx,T=+d.cy,A=+d.rx||+d.r||0,R=+d.ry||+d.r||0;u.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",i((M-A)*m),i((T-R)*m),i((M+A)*m),i((T+R)*m),i(M*m))}if("clip-rect"in l){var N=r(l["clip-rect"]).split(c);if(4==N.length){N[2]=+N[2]+ +N[0],N[3]=+N[3]+ +N[1];var F=u.clipRect||t._g.doc.createElement("div"),P=F.style;P.clip=t.format("rect({1}px {2}px {3}px {0}px)",N),u.clipRect||(P.position="absolute",P.top=0,P.left=0,P.width=a.paper.width+"px",P.height=a.paper.height+"px",u.parentNode.insertBefore(F,u),F.appendChild(u),u.clipRect=F)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(a.textpath){var L=a.textpath.style;l.font&&(L.font=l.font),l["font-family"]&&(L.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(L.fontSize=l["font-size"]),l["font-weight"]&&(L.fontWeight=l["font-weight"]),l["font-style"]&&(L.fontStyle=l["font-style"])}if("arrow-start"in l&&S(v,l["arrow-start"]),"arrow-end"in l&&S(v,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var O=u.getElementsByTagName(h);if(!(O=O&&O[0])&&(O=B(h)),"image"==a.type&&l.src&&(O.src=l.src),l.fill&&(O.on=!0),null!=O.on&&"none"!=l.fill&&null!==l.fill||(O.on=!1),O.on&&l.fill){var E=r(l.fill).match(t._ISURL);if(E){O.parentNode==u&&u.removeChild(O),O.rotate=!0,O.src=E[1],O.type="tile";var I=a.getBBox(1);O.position=I.x+p+I.y,a._.fillpos=[I.x,I.y],t._preload(E[1],function(){a._.fillsize=[this.offsetWidth,this.offsetHeight]})}else O.color=t.getRGB(l.fill).hex,O.src=f,O.type="solid",t.getRGB(l.fill).error&&(v.type in{circle:1,ellipse:1}||"r"!=r(l.fill).charAt())&&z(v,l.fill,O)&&(d.fill="none",d.gradient=l.fill,O.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var j=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);j=o(s(j,0),1),O.opacity=j,O.src&&(O.color="none")}u.appendChild(O);var D=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],q=!1;!D&&(q=D=B("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(D.on=!0),("none"==l.stroke||null===l.stroke||null==D.on||0==l.stroke||0==l["stroke-width"])&&(D.on=!1);var H=t.getRGB(l.stroke);D.on&&l.stroke&&(D.color=H.hex),j=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+H.o+1||2)-1);var V=.75*(n(l["stroke-width"])||1);if(j=o(s(j,0),1),null==l["stroke-width"]&&(V=d["stroke-width"]),l["stroke-width"]&&(D.weight=V),V&&V<1&&(j*=V)&&(D.weight=1),D.opacity=j,l["stroke-linejoin"]&&(D.joinstyle=l["stroke-linejoin"]||"miter"),D.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(D.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var Y={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};D.dashstyle=Y[e](l["stroke-dasharray"])?Y[l["stroke-dasharray"]]:f}q&&u.appendChild(D)}if("text"==v.type){v.paper.canvas.style.display=f;var W=v.paper.span,X=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);x=W.style,d.font&&(x.font=d.font),d["font-family"]&&(x.fontFamily=d["font-family"]),d["font-weight"]&&(x.fontWeight=d["font-weight"]),d["font-style"]&&(x.fontStyle=d["font-style"]),X=n(d["font-size"]||X&&X[0])||10,x.fontSize=100*X+"px",v.textpath.string&&(W.innerHTML=r(v.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=W.getBoundingClientRect();v.W=d.w=(G.right-G.left)/100,v.H=d.h=(G.bottom-G.top)/100,v.X=d.x,v.Y=d.y+v.H/2,("x"in l||"y"in l)&&(v.path.v=t.format("m{0},{1}l{2},{1}",i(d.x*m),i(d.y*m),i(d.x*m)+1));for(var U=["x","y","text","font","font-family","font-weight","font-style","font-size"],$=0,Z=U.length;$<Z;$++)if(U[$]in l){v._.dirty=1;break}switch(d["text-anchor"]){case"start":v.textpath.style["v-text-align"]="left",v.bbx=v.W/2;break;case"end":v.textpath.style["v-text-align"]="right",v.bbx=-v.W/2;break;default:v.textpath.style["v-text-align"]="center",v.bbx=0}v.textpath.style["v-text-kern"]=!0}},z=function(e,i,s){e.attrs=e.attrs||{};var o=Math.pow,l="linear",h=".5 .5";if(e.attrs.gradient=i,i=(i=r(i).replace(t._radial_gradient,function(t,e,r){return l="radial",e&&r&&(e=n(e),r=n(r),o(e-.5,2)+o(r-.5,2)>.25&&(r=a.sqrt(.25-o(e-.5,2))*(2*(r>.5)-1)+.5),h=e+p+r),f})).split(/\s*\-\s*/),"linear"==l){var c=i.shift();if(c=-n(c),isNaN(c))return null}var u=t._parseDots(i);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(s),s.on=!0,s.method="none",s.color=u[0].color,s.color2=u[u.length-1].color;for(var d=[],x=0,y=u.length;x<y;x++)u[x].offset&&d.push(u[x].offset+p+u[x].color);s.colors=d.length?d.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=h,s.angle=0):(s.type="gradient",s.angle=(270-c)%360),e.appendChild(s)}return 1},T=function(e,r){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},A=t.el;T.prototype=A,A.constructor=T,A.transform=function(e){if(null==e)return this._.transform;var n,a=this.paper._viewBoxShift,i=a?"s"+[a.scale,a.scale]+"-1-1t"+[a.dx,a.dy]:f;a&&(n=e=r(e).replace(/\.{3}|\u2026/g,this._.transform||f)),t._extractTransform(this,i+e);var s,o=this.matrix.clone(),l=this.skew,h=this.node,c=~r(this.attrs.fill).indexOf("-"),u=!r(this.attrs.fill).indexOf("url(");if(o.translate(-.5,-.5),u||c||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=o.split(),c&&s.noRotation||!s.isSimple){h.style.filter=o.toFilter();var d=this.getBBox(),x=this.getBBox(1),y=d.x-x.x,g=d.y-x.y;h.coordorigin=y*-m+p+g*-m,C(this,1,1,y,g,0)}else h.style.filter=f,C(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else h.style.filter=f,l.matrix=r(o),l.offset=o.offset();return n&&(this._.transform=n),this},A.rotate=function(t,e,a){if(this.removed)return this;if(null!=t){if((t=r(t).split(c)).length-1&&(e=n(t[1]),a=n(t[2])),t=n(t[0]),null==a&&(e=a),null==e||null==a){var i=this.getBBox(1);e=i.x+i.width/2,a=i.y+i.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,a]])),this}},A.translate=function(t,e){return this.removed?this:((t=r(t).split(c)).length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},A.scale=function(t,e,a,i){if(this.removed)return this;if((t=r(t).split(c)).length-1&&(e=n(t[1]),a=n(t[2]),i=n(t[3]),isNaN(a)&&(a=null),isNaN(i)&&(i=null)),t=n(t[0]),null==e&&(e=t),null==i&&(a=i),null==a||null==i)var s=this.getBBox(1);return this.transform(this._.transform.concat([["s",t,e,a=null==a?s.x+s.width/2:a,i=null==i?s.y+s.height/2:i]])),this._.dirtyT=1,this},A.hide=function(){return!this.removed&&(this.node.style.display="none"),this},A.show=function(){return!this.removed&&(this.node.style.display=f),this},A._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},A.remove=function(){if(!this.removed&&this.node.parentNode){for(var e in this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},A.attr=function(r,n){if(this.removed)return this;if(null==r){var a={};for(var i in this.attrs)this.attrs[e](i)&&(a[i]=this.attrs[i]);return a.gradient&&"none"==a.fill&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(null==n&&t.is(r,"string")){if(r==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=r.split(c),o={},l=0,p=s.length;l<p;l++)o[r=s[l]]=r in this.attrs?this.attrs[r]:t.is(this.paper.customAttributes[r],"function")?this.paper.customAttributes[r].def:t._availableAttrs[r];return p-1?o:o[s[0]]}if(this.attrs&&null==n&&t.is(r,"array")){for(o={},l=0,p=r.length;l<p;l++)o[r[l]]=this.attr(r[l]);return o}var f;for(var d in null!=n&&((f={})[r]=n),null==n&&t.is(r,"object")&&(f=r),f)u("raphael.attr."+d+"."+this.id,this,f[d]);if(f){for(d in this.paper.customAttributes)if(this.paper.customAttributes[e](d)&&f[e](d)&&t.is(this.paper.customAttributes[d],"function")){var x=this.paper.customAttributes[d].apply(this,[].concat(f[d]));for(var y in this.attrs[d]=f[d],x)x[e](y)&&(f[y]=x[y])}f.text&&"text"==this.type&&(this.textpath.string=f.text),M(this,f)}return this},A.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},A.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},A.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},A.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},A.blur=function(e){var r=this.node.runtimeStyle,n=r.filter;n=n.replace(y,f),0!=+e?(this.attrs.blur=e,r.filter=n+p+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+e||1.5)+")",r.margin=t.format("-{0}px 0 0 -{0}px",i(+e||1.5))):(r.filter=n,r.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var r=B("shape");r.style.cssText=v,r.coordsize=m+p+m,r.coordorigin=e.coordorigin;var n=new T(r,e),a={fill:"none",stroke:"#000"};t&&(a.path=t),n.type="path",n.path=[],n.Path=f,M(n,a),e.canvas.appendChild(r);var i=B("skew");return i.on=!0,r.appendChild(i),n.skew=i,n.transform(f),n},t._engine.rect=function(e,r,n,a,i,s){var o=t._rectPath(r,n,a,i,s),l=e.path(o),h=l.attrs;return l.X=h.x=r,l.Y=h.y=n,l.W=h.width=a,l.H=h.height=i,h.r=s,h.path=o,l.type="rect",l},t._engine.ellipse=function(t,e,r,n,a){var i=t.path();return i.X=e-n,i.Y=r-a,i.W=2*n,i.H=2*a,i.type="ellipse",M(i,{cx:e,cy:r,rx:n,ry:a}),i},t._engine.circle=function(t,e,r,n){var a=t.path();return a.X=e-n,a.Y=r-n,a.W=a.H=2*n,a.type="circle",M(a,{cx:e,cy:r,r:n}),a},t._engine.image=function(e,r,n,a,i,s){var o=t._rectPath(n,a,i,s),l=e.path(o).attr({stroke:"none"}),c=l.attrs,u=l.node,p=u.getElementsByTagName(h)[0];return c.src=r,l.X=c.x=n,l.Y=c.y=a,l.W=c.width=i,l.H=c.height=s,c.path=o,l.type="image",p.parentNode==u&&u.removeChild(p),p.rotate=!0,p.src=r,p.type="tile",l._.fillpos=[n,a],l._.fillsize=[i,s],u.appendChild(p),C(l,1,1,0,0,0),l},t._engine.text=function(e,n,a,s){var o=B("shape"),l=B("path"),h=B("textpath");n=n||0,a=a||0,s=s||"",l.v=t.format("m{0},{1}l{2},{1}",i(n*m),i(a*m),i(n*m)+1),l.textpathok=!0,h.string=r(s),h.on=!0,o.style.cssText=v,o.coordsize=m+p+m,o.coordorigin="0 0";var c=new T(o,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:s};c.shape=o,c.path=l,c.textpath=h,c.type="text",c.attrs.text=r(s),c.attrs.x=n,c.attrs.y=a,c.attrs.w=1,c.attrs.h=1,M(c,u),o.appendChild(h),o.appendChild(l),e.canvas.appendChild(o);var d=B("skew");return d.on=!0,o.appendChild(d),c.skew=d,c.transform(f),c},t._engine.setSize=function(e,r){var n=this.canvas.style;return this.width=e,this.height=r,e==+e&&(e+="px"),r==+r&&(r+="px"),n.width=e,n.height=r,n.clip="rect(0 "+e+" "+r+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,r,n,a,i){t.eve("raphael.setViewBox",this,this._viewBox,[e,r,n,a,i]);var o,l,h=this.width,c=this.height,u=1/s(n/h,a/c);return i&&(l=h/n,n*(o=c/a)<h&&(e-=(h-n*o)/2/o),a*l<c&&(r-=(c-a*l)/2/l)),this._viewBox=[e,r,n,a,!!i],this._viewBoxShift={dx:-e,dy:-r,scale:u},this.forEach(function(t){t.transform("...")}),this},t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),B=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){B=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),r=e.container,n=e.height,a=e.width,i=e.x,s=e.y;if(!r)throw new Error("VML container not found.");var o=new t._Paper,l=o.canvas=t._g.doc.createElement("div"),h=l.style;return i=i||0,s=s||0,a=a||512,n=n||342,o.width=a,o.height=n,a==+a&&(a+="px"),n==+n&&(n+="px"),o.coordsize=216e5+p+216e5,o.coordorigin="0 0",o.span=t._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",a,n),1==r?(t._g.doc.body.appendChild(l),h.left=i+"px",h.top=s+"px",h.position="absolute"):r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l),o.renderfix=function(){},o},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){for(var e in t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var R=t.st;for(var N in A)A[e](N)&&!R[e](N)&&(R[N]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(N))}(window.Raphael),function(t,e){"function"==typeof define&&define.amd?define(["raphael"],function(r){return e(r||t.Raphael)}):e(Raphael)}(this,function(t){t.fn.freeTransform=function(t,e,r){var n,a,i,s,o=this,l=t.getBBox(!0);if(t.freeTransform)return t.freeTransform;function h(t){var e,r,a=[];return"number"!=typeof t&&(t=0),e={x:n.attrs.rotate*Math.PI/180,y:(n.attrs.rotate+90)*Math.PI/180},r={x:n.attrs.size.x/2*n.attrs.scale.x+t,y:n.attrs.size.y/2*n.attrs.scale.y+t},[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}].map(function(t){a.push({x:n.attrs.center.x+n.attrs.translate.x+t.x*r.x*Math.cos(e.x)+t.y*r.y*Math.cos(e.y),y:n.attrs.center.y+n.attrs.translate.y+t.x*r.x*Math.sin(e.x)+t.y*r.y*Math.sin(e.y)})}),a}function c(){var t={x:/^([0-9]+)%$/.exec(o.width),y:/^([0-9]+)%$/.exec(o.height)};return{x:t.x?o.canvas.clientWidth||o.canvas.parentNode.clientWidth*parseInt(t.x[1],10)*.01:o.canvas.clientWidth||o.width,y:t.y?o.canvas.clientHeight||o.canvas.parentNode.clientHeight*parseInt(t.y[1],10)*.01:o.canvas.clientHeight||o.height}}function u(t){var e,r,a,i={x:0,y:0},s={x:0,y:0};t&&n.opts.snap.drag&&(e=t.x,r=t.y,[0,1].map(function(){i.x=e-Math.round(e/n.opts.snap.drag)*n.opts.snap.drag,i.y=r-Math.round(r/n.opts.snap.drag)*n.opts.snap.drag,Math.abs(i.x)<=n.opts.snapDist.drag&&(s.x=i.x),Math.abs(i.y)<=n.opts.snapDist.drag&&(s.y=i.y),e+=t.width-s.x,r+=t.height-s.y}),n.attrs.translate.x-=s.x,n.attrs.translate.y-=s.y),n.opts.boundary&&(n.opts.boundarywidth=n.opts.boundarywidth||c().x*(n.o.viewBoxRatio&&n.o.viewBoxRatio.x||1),n.opts.boundaryheight=n.opts.boundaryheight||c().y*(n.o.viewBoxRatio&&n.o.viewBoxRatio.y||1),n.attrs.center.x+n.attrs.translate.x<n.opts.boundary.x&&(n.attrs.translate.x+=n.opts.boundary.x-(n.attrs.center.x+n.attrs.translate.x)),n.attrs.center.y+n.attrs.translate.y<n.opts.boundary&&(n.attrs.translate.y+=n.opts.boundary-(n.attrs.center.y+n.attrs.translate.y)),n.attrs.center.x+n.attrs.translate.x>n.opts.boundary.x+n.opts.boundarywidth&&(n.attrs.translate.x+=n.opts.boundary.x+n.opts.boundarywidth-(n.attrs.center.x+n.attrs.translate.x)),n.attrs.center.y+n.attrs.translate.y>n.opts.boundary+n.opts.boundaryheight&&(n.attrs.translate.y+=n.opts.boundary+n.opts.boundaryheight-(n.attrs.center.y+n.attrs.translate.y))),i=Math.abs(n.attrs.rotate%n.opts.snap.rotate),(i=Math.min(i,n.opts.snap.rotate-i))<n.opts.snapDist.rotate&&(n.attrs.rotate=Math.round(n.attrs.rotate/n.opts.snap.rotate)*n.opts.snap.rotate),i={x:Math.abs(n.attrs.scale.x*n.attrs.size.x%n.opts.snap.scale),y:Math.abs(n.attrs.scale.y*n.attrs.size.x%n.opts.snap.scale)},(i={x:Math.min(i.x,n.opts.snap.scale-i.x),y:Math.min(i.y,n.opts.snap.scale-i.y)}).x<n.opts.snapDist.scale&&(n.attrs.scale.x=Math.round(n.attrs.scale.x*n.attrs.size.x/n.opts.snap.scale)*n.opts.snap.scale/n.attrs.size.x),i.y<n.opts.snapDist.scale&&(n.attrs.scale.y=Math.round(n.attrs.scale.y*n.attrs.size.y/n.opts.snap.scale)*n.opts.snap.scale/n.attrs.size.y),n.opts.range.rotate&&((a=(360+n.attrs.rotate)%360)>180&&(a-=360),a<n.opts.range.rotate[0]&&(n.attrs.rotate+=n.opts.range.rotate[0]-a),a>n.opts.range.rotate[1]&&(n.attrs.rotate+=n.opts.range.rotate[1]-a)),n.opts.range.scale&&(n.attrs.scale.x*n.attrs.size.x<n.opts.range.scale[0]&&(n.attrs.scale.x=n.opts.range.scale[0]/n.attrs.size.x),n.attrs.scale.y*n.attrs.size.y<n.opts.range.scale[0]&&(n.attrs.scale.y=n.opts.range.scale[0]/n.attrs.size.y),n.attrs.scale.x*n.attrs.size.x>n.opts.range.scale[1]&&(n.attrs.scale.x=n.opts.range.scale[1]/n.attrs.size.x),n.attrs.scale.y*n.attrs.size.y>n.opts.range.scale[1]&&(n.attrs.scale.y=n.opts.range.scale[1]/n.attrs.size.y))}function p(){return{x:n.attrs.scale.x*n.attrs.size.x>=n.opts.range.scale[0]&&n.attrs.scale.x*n.attrs.size.x<=n.opts.range.scale[1],y:n.attrs.scale.y*n.attrs.size.y>=n.opts.range.scale[0]&&n.attrs.scale.y*n.attrs.size.y<=n.opts.range.scale[1]}}function f(t){"x"===t?n.attrs.scale.y=n.attrs.scale.x/n.attrs.ratio:n.attrs.scale.x=n.attrs.scale.y*n.attrs.ratio}function d(t){var e,r={};for(e in t)r[e]="object"==typeof t[e]?d(t[e]):t[e];return r}function x(t){var e=[];n.callback&&(t.map(function(t,r){t&&e.push(t)}),clearTimeout(s),s=setTimeout(function(){n.callback&&n.callback(n,e,h())},.1))}return Array.prototype.hasOwnProperty("map")||(Array.prototype.map=function(t,e){for(a in i=[],this)this.hasOwnProperty(a)&&(i[a]=t.call(e,this[a],a,this));return i}),Array.prototype.hasOwnProperty("indexOf")||(Array.prototype.indexOf=function(t,e){for(a=e||0,j=this.length;a<j;a++)if(this[a]===t)return a;return-1}),(n=t.freeTransform={attrs:{x:l.x,y:l.y,size:{x:l.width,y:l.height},center:{x:l.x+l.width/2,y:l.y+l.height/2},rotate:0,scale:{x:1,y:1},translate:{x:0,y:0},ratio:1},axes:null,bbox:null,callback:null,items:[],handles:{center:null,x:null,y:null},offset:{rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},opts:{animate:!1,attrs:{fill:"#fff",stroke:"#000"},boundary:{x:o._left||0,y:o._top||0,width:null,height:null},customCorners:!1,distance:1.3,drag:!0,draw:!1,keepRatio:!1,range:{rotate:[-180,180],scale:[-99999,99999]},rotate:!0,scale:!0,snap:{rotate:0,scale:0,drag:0},snapDist:{rotate:0,scale:0,drag:7},size:5},subject:t}).updateHandles=function(){var t,e,r,a,i,s,l,u=[[-1,-1],[1,-1],[1,1],[-1,1],[0,-1],[1,0],[0,1],[-1,0]];return(n.handles.bbox||n.opts.rotate.indexOf("self")>=0)&&(e=t=h(0),n.opts.customCorners&&"number"==typeof n.opts.customCorners.distance&&(e=h(n.opts.customCorners.distance))),r={x:n.attrs.rotate*Math.PI/180,y:(n.attrs.rotate+90)*Math.PI/180},a={x:n.attrs.size.x/2*n.attrs.scale.x,y:n.attrs.size.y/2*n.attrs.scale.y},n.axes.map(function(t){n.handles[t]&&(i=n.attrs.center.x+n.attrs.translate.x+a[t]*n.opts.distance*Math.cos(r[t]),s=n.attrs.center.y+n.attrs.translate.y+a[t]*n.opts.distance*Math.sin(r[t]),l={x:1,y:1},o._viewBox&&(l={x:o._viewBox[2]/c().x,y:o._viewBox[3]/c().y}),n.opts.boundary&&(i=Math.max(Math.min(i,n.opts.boundary.x+(n.opts.boundary.width||c().x*l.x)),n.opts.boundary.x),s=Math.max(Math.min(s,n.opts.boundary.y+(n.opts.boundary.height||c().y*l.y)),n.opts.boundary.y)),n.handles[t].disc.attr({cx:i,cy:s}),n.handles[t].line.toFront().attr({path:[["M",n.attrs.center.x+n.attrs.translate.x,n.attrs.center.y+n.attrs.translate.y],["L",n.handles[t].disc.attrs.cx,n.handles[t].disc.attrs.cy]]}),n.handles[t].disc.toFront())}),n.bbox&&(n.bbox.toFront().attr({path:[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["L",t[0].x,t[0].y]]}),n.handles.bbox&&n.handles.bbox.map(function(r,a){var i,s,o,l;r.isCorner?(i=e[a].x,s=e[a].y):(i=(e[o=a%4].x+e[l=(o+1)%t.length].x)/2,s=(e[o].y+e[l].y)/2),r.element.toFront().attr({x:i-(r.isCorner?n.opts.customCorners?Math.ceil(n.opts.customCorners.size/2):n.opts.size.bboxCorners:n.opts.size.bboxSides),y:s-(r.isCorner?n.opts.customCorners?Math.ceil(n.opts.customCorners.size/2):n.opts.size.bboxCorners:n.opts.size.bboxSides)}).transform(n.opts.customCorners?null:"R"+n.attrs.rotate),r.x=u[a][0],r.y=u[a][1]})),n.circle&&n.circle.attr({cx:n.attrs.center.x+n.attrs.translate.x,cy:n.attrs.center.y+n.attrs.translate.y,r:Math.max(a.x,a.y)*n.opts.distance}),n.handles.center&&n.handles.center.disc.toFront().attr({cx:n.attrs.center.x+n.attrs.translate.x,cy:n.attrs.center.y+n.attrs.translate.y}),n.opts.rotate.indexOf("self")>=0&&(a=Math.max(Math.sqrt(Math.pow(t[1].x-t[0].x,2)+Math.pow(t[1].y-t[0].y,2)),Math.sqrt(Math.pow(t[2].x-t[1].x,2)+Math.pow(t[2].y-t[1].y,2)))/2),n},n.showHandles=function(){var e,r,a,i,s=[];if(draggables=[],n.hideHandles(),n.axes.map(function(t){n.handles[t]={},n.handles[t].line=o.path(["M",n.attrs.center.x,n.attrs.center.y]).attr({stroke:n.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:.5}),n.handles[t].disc=o.circle(n.attrs.center.x,n.attrs.center.y,n.opts.size.axes).attr(n.opts.attrs),n.handles[t].disc.node.setAttribute("class","handle arm axis-"+t)}),n.opts.draw.indexOf("bbox")>=0)for(n.bbox=o.path("").attr({stroke:n.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:.5}),n.handles.bbox=[],e=n.opts.scale.indexOf("bboxCorners")||n.opts.customCorners>=0?0:4;e<(-1===n.opts.scale.indexOf("bboxSides")?4:8);e++)(r={}).index=e,r.axis=e%2?"x":"y",r.isCorner=e<4,r.isCorner&&n.opts.customCorners?r.element=o.image(n.opts.customCorners.corners[e].image,n.attrs.center.x,n.attrs.center.y,n.opts.customCorners.size,n.opts.customCorners.size):(r.element=o.rect(n.attrs.center.x,n.attrs.center.y,2*n.opts.size[r.isCorner?"bboxCorners":"bboxSides"],2*n.opts.size[r.isCorner?"bboxCorners":"bboxSides"]).attr(n.opts.attrs),r.element.node.setAttribute("class",r.isCorner?"handle bbox corner index-"+e+" axis-"+r.axis:"handle bbox side index-"+(e-4)+" axis-"+r.axis)),n.handles.bbox[e]=r;return-1!==n.opts.draw.indexOf("circle")&&(n.circle=o.circle(0,0,0).attr({stroke:n.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:.3})),-1!==n.opts.drag.indexOf("center")&&(n.handles.center={},n.handles.center.disc=o.circle(n.attrs.center.x,n.attrs.center.y,n.opts.size.center).attr(n.opts.attrs),n.handles.center.disc.node.setAttribute("class","handle center")),n.axes.map(function(t){n.handles[t]&&s.push({element:n.handles[t].disc,rotate:-1!==n.opts.rotate.indexOf("axis"+t.toUpperCase()),scale:-1!==n.opts.scale.indexOf("axis"+t.toUpperCase()),axis:t,isCorner:!1})}),n.opts.customCorners&&n.handles.bbox.map(function(t){var e;void 0!==n.opts.customCorners.corners[t.index]&&("rotate"!==(e=n.opts.customCorners.corners[t.index].action)&&"scale"!==e||s.push({element:t.element,rotate:"rotate"===e,scale:"scale"===e,axis:"x",isCorner:!0}))}),s.map(function(t){t.element.drag(function(e,r){var a,i,s,o,l,h={x:n.o.scale.x<0,y:n.o.scale.y<0};n.o.viewBoxRatio&&(e*=n.o.viewBoxRatio.x,r*=n.o.viewBoxRatio.y),a=e+t.element.ox,i=r+t.element.oy,t.rotate&&(s=Math.atan2(i-n.o.center.y-n.o.translate.y,a-n.o.center.x-n.o.translate.x),n.attrs.rotate=180*s/Math.PI-n.o.angle,h[t.axis]&&(n.attrs.rotate-=180)),n.opts.boundary&&(a=Math.max(Math.min(a,n.opts.boundary.x+(n.opts.boundary.width||c().x*(n.o.viewBoxRatio&&n.o.viewBoxRatio.x||1))),n.opts.boundary.x),i=Math.max(Math.min(i,n.opts.boundary.y+(n.opts.boundary.height||c().y*(n.o.viewBoxRatio&&n.o.viewBoxRatio.y||1))),n.opts.boundary.y)),o=i-n.o.center.y-n.o.translate.y-(n.opts.customCorners?n.opts.customCorners.distance:0),l=Math.sqrt(Math.pow(a-n.o.center.x-n.o.translate.x-(n.opts.customCorners?n.opts.customCorners.distance:0),2)+Math.pow(o,2)),t.scale&&(n.attrs.scale[t.axis]=l/(n.o.size[t.axis]/2*n.o.distance),h[t.axis]&&(n.attrs.scale[t.axis]*=-1)),u(),-1!==n.opts.keepRatio.indexOf("axis"+t.axis.toUpperCase())?f(t.axis):n.attrs.ratio=n.attrs.scale.x/n.attrs.scale.y,n.attrs.scale.x&&n.attrs.scale.y&&n.apply(),x([t.rotate?"rotate":null,t.scale?"scale":null])},function(){n.o=d(n.attrs),o._viewBox&&(n.o.viewBoxRatio={x:o._viewBox[2]/c().x,y:o._viewBox[3]/c().y}),t.element.ox=this.attrs.cx?this.attrs.cx:this.attrs.x+this.attrs.width/2,t.element.oy=this.attrs.cy?this.attrs.cy:this.attrs.y+this.attrs.height/2,t.isCorner?(hypotenuse=Math.sqrt(Math.pow(n.o.size.x*n.o.scale.x,2)+Math.pow(n.o.size.y*n.o.scale.y,2))/2,opposite=n.o.size.x*n.o.scale.x/2,pos={x:t.element.ox-(n.o.center.x+n.o.x+n.o.translate.x),y:t.element.oy-(n.o.center.y+n.o.y+n.o.translate.y)},n.o.distance=hypotenuse/opposite,n.o.angle=90-180*Math.atan2(pos.x,pos.y)/Math.PI-n.o.rotate):(n.o.distance=n.opts.distance,n.o.angle="y"===t.axis?90:0),x([t.rotate?"rotate start":null,t.scale?"scale start":null])},function(){x([t.rotate?"rotate end":null,t.scale?"scale end":null])})}),n.opts.draw.indexOf("bbox")>=0&&!n.opts.customCorners&&(-1!==n.opts.scale.indexOf("bboxCorners")||-1!==n.opts.scale.indexOf("bboxSides"))&&n.handles.bbox.map(function(t){t.element.drag(function(e,r){var a,i,s,o,l,h,c,y,g,v=d(n.attrs),m={x:0,y:0};n.o.viewBoxRatio&&(e*=n.o.viewBoxRatio.x,r*=n.o.viewBoxRatio.y),s=e*(i=n.o.rotate.cos)-r*(a=n.o.rotate.sin),o=e*a+r*i,s*=Math.abs(t.x),o*=Math.abs(t.y),n.attrs.translate={x:n.o.translate.x+(s*i+o*a)/2,y:n.o.translate.y+(s*-a+o*i)/2},s=(l=n.o.handlePos.cx+e-n.attrs.center.x-n.attrs.translate.x)*i-(h=n.o.handlePos.cy+r-n.attrs.center.y-n.attrs.translate.y)*a,o=l*a+h*i,t.isCorner&&-1!==n.opts.keepRatio.indexOf("bboxCorners")&&((g=o*t.y*(c=n.attrs.size.x*n.attrs.scale.x/(n.attrs.size.y*n.attrs.scale.y)))>(y=s*t.x*(1/c))*c?s=g*t.x:o=y*t.y),n.attrs.scale={x:2*s*t.x/n.o.size.x||n.attrs.scale.x,y:2*o*t.y/n.o.size.y||n.attrs.scale.y},p().x&&p().y||(n.attrs=v),u(),(t.isCorner&&-1!==n.opts.keepRatio.indexOf("bboxCorners")||!t.isCorner&&-1!==n.opts.keepRatio.indexOf("bboxSides"))&&(f(t.axis),m.x=(n.attrs.scale.x-n.o.scale.x)*n.o.size.x*t.x,m.y=(n.attrs.scale.y-n.o.scale.y)*n.o.size.y*t.y,o=-m.x*a+m.y*i,n.attrs.translate.x=n.o.translate.x+(s=m.x*i+m.y*a)/2,n.attrs.translate.y=n.o.translate.y+o/2),n.attrs.ratio=n.attrs.scale.x/n.attrs.scale.y,x(["scale"]),n.apply()},function(){var e=(360-n.attrs.rotate)%360/180*Math.PI,r=t.element.attr(["x","y"]);n.o=d(n.attrs),n.o.handlePos={cx:r.x+n.opts.size[t.isCorner?"bboxCorners":"bboxSides"],cy:r.y+n.opts.size[t.isCorner?"bboxCorners":"bboxSides"]},n.o.rotate={sin:Math.sin(e),cos:Math.cos(e)},o._viewBox&&(n.o.viewBoxRatio={x:o._viewBox[2]/c().x,y:o._viewBox[3]/c().y}),x(["scale start"])},function(){x(["scale end"])})}),n.opts.customCorners&&n.handles.bbox.map(function(t){void 0!==n.opts.customCorners.corners[t.index]&&-1===["drag","rotate","scale"].indexOf(n.opts.customCorners.corners[t.index].action)&&(t.element.drag(function(){return!1}),t.element.click(function(){x(["custom:"+n.opts.customCorners.corners[t.index].action])}))}),n.opts.drag.indexOf("self")>=0&&-1===n.opts.scale.indexOf("self")&&-1===n.opts.rotate.indexOf("self")&&draggables.push(t),n.opts.drag.indexOf("center")>=0&&draggables.push(n.handles.center.disc),n.opts.customCorners&&n.handles.bbox.map(function(t){void 0!==n.opts.customCorners.corners[t.index]&&"drag"===n.opts.customCorners.corners[t.index].action&&draggables.push(t.element)}),draggables.map(function(e){e.drag(function(t,e){var r=d(n.o.bbox);n.o.viewBoxRatio&&(t*=n.o.viewBoxRatio.x,e*=n.o.viewBoxRatio.y),n.attrs.translate.x=n.o.translate.x+t,n.attrs.translate.y=n.o.translate.y+e,r.x+=t,r.y+=e,u(r),x(["drag"]),n.apply()},function(){n.o=d(n.attrs),n.opts.snap.drag&&(n.o.bbox=t.getBBox()),o._viewBox&&(n.o.viewBoxRatio={x:o._viewBox[2]/c().x,y:o._viewBox[3]/c().y}),n.axes.map(function(t){n.handles[t]&&(n.handles[t].disc.ox=n.handles[t].disc.attrs.cx,n.handles[t].disc.oy=n.handles[t].disc.attrs.cy)}),x(["drag start"])},function(){x(["drag end"])})}),a=n.opts.rotate.indexOf("self")>=0,i=n.opts.scale.indexOf("self")>=0,(a||i)&&t.drag(function(t,e,r,s){var o,l,h=n.o.scale.x<0,c=n.o.scale.y<0;a&&(o=Math.atan2(s-n.o.center.y-n.o.translate.y,r-n.o.center.x-n.o.translate.x),n.attrs.rotate=n.o.rotate+180*o/Math.PI-n.o.deg),i&&(l=Math.sqrt(Math.pow(r-n.o.center.x-n.o.translate.x,2)+Math.pow(s-n.o.center.y-n.o.translate.y,2)),n.attrs.scale.x=n.attrs.scale.y=(h?-1:1)*n.o.scale.x+(l-n.o.radius)/(n.o.size.x/2),h&&(n.attrs.scale.x*=-1),c&&(n.attrs.scale.y*=-1)),u(),n.apply(),x([a?"rotate":null,i?"scale":null])},function(t,e){n.o=d(n.attrs),n.o.deg=180*Math.atan2(e-n.o.center.y-n.o.translate.y,t-n.o.center.x-n.o.translate.x)/Math.PI,n.o.radius=Math.sqrt(Math.pow(t-n.o.center.x-n.o.translate.x,2)+Math.pow(e-n.o.center.y-n.o.translate.y,2)),o._viewBox&&(n.o.viewBoxRatio={x:o._viewBox[2]/c().x,y:o._viewBox[3]/c().y}),x([a?"rotate start":null,i?"scale start":null])},function(){x([a?"rotate end":null,i?"scale end":null])}),n.updateHandles(),n},n.hideHandles=function(t){return void 0===(t=t||{}).undrag&&(t.undrag=!0),t.undrag&&n.items.map(function(t){t.el.undrag()}),n.handles.center&&(n.handles.center.disc.remove(),n.handles.center=null),["x","y"].map(function(t){n.handles[t]&&(n.handles[t].disc.remove(),n.handles[t].line.remove(),n.handles[t]=null)}),n.bbox&&(n.bbox.remove(),n.bbox=null,n.handles.bbox&&(n.handles.bbox.map(function(t){t.element.remove()}),n.handles.bbox=null)),n.circle&&(n.circle.remove(),n.circle=null),n},n.setOpts=function(t,e){var r,a;for(r in void 0!==e&&(n.callback="function"==typeof e&&e),t)if(t[r]&&t[r].constructor===Object)for(a in!1===n.opts[r]&&(n.opts[r]={}),t[r])t[r].hasOwnProperty(a)&&(n.opts[r][a]=t[r][a]);else n.opts[r]=t[r];return!0===n.opts.animate&&(n.opts.animate={delay:700,easing:"linear"}),!0===n.opts.drag&&(n.opts.drag=["center","self"]),!0===n.opts.keepRatio&&(n.opts.keepRatio=["axisX","axisY","bboxCorners","bboxSides"]),!0===n.opts.rotate&&(n.opts.rotate=["axisX","axisY"]),!0===n.opts.scale&&(n.opts.scale=["axisX","axisY","bboxCorners","bboxSides"]),["drag","draw","keepRatio","rotate","scale"].map(function(t){!1===n.opts[t]&&(n.opts[t]=[])}),n.axes=[],(n.opts.rotate.indexOf("axisX")>=0||n.opts.scale.indexOf("axisX")>=0)&&n.axes.push("x"),(n.opts.rotate.indexOf("axisY")>=0||n.opts.scale.indexOf("axisY")>=0)&&n.axes.push("y"),["drag","rotate","scale"].map(function(t){n.opts.snapDist[t]||(n.opts.snapDist[t]=n.opts.snap[t])}),n.opts.range={rotate:[parseFloat(n.opts.range.rotate[0]),parseFloat(n.opts.range.rotate[1])],scale:[parseFloat(n.opts.range.scale[0]),parseFloat(n.opts.range.scale[1])]},n.opts.snap={drag:parseFloat(n.opts.snap.drag)||0,rotate:parseFloat(n.opts.snap.rotate)||0,scale:parseFloat(n.opts.snap.scale)||0},n.opts.snapDist={drag:parseFloat(n.opts.snapDist.drag)||0,rotate:parseFloat(n.opts.snapDist.rotate)||0,scale:parseFloat(n.opts.snapDist.scale)||0},"string"==typeof n.opts.size&&(n.opts.size=parseFloat(n.opts.size)||0),isNaN(n.opts.size)||(n.opts.size={axes:n.opts.size,bboxCorners:n.opts.size,bboxSides:n.opts.size,center:n.opts.size}),n.opts.customCorners&&(n.opts.customCorners.size=parseFloat(n.opts.customCorners.size)||0,n.opts.customCorners.distance=parseFloat(n.opts.customCorners.distance)||0),n.showHandles(),x(["init"]),n},n.setOpts(e,r),n.apply=function(){return n.items.map(function(t,e){var r=n.attrs.center.x+n.offset.translate.x,a=n.attrs.center.y+n.offset.translate.y,i=n.attrs.rotate-n.offset.rotate,s=n.attrs.scale.x/n.offset.scale.x,o=n.attrs.scale.y/n.offset.scale.y,l=n.attrs.translate.x-n.offset.translate.x,h=n.attrs.translate.y-n.offset.translate.y;n.opts.animate?(x(["animate start"]),t.el.animate({transform:["R",i,r,a,"S",s,o,r,a,"T",l,h]+n.items[e].transformString},n.opts.animate.delay,n.opts.animate.easing,function(){x(["animate end"]),n.updateHandles()})):(t.el.transform(["R",i,r,a,"S",s,o,r,a,"T",l,h]+n.items[e].transformString),x(["apply"]),n.updateHandles())}),n},n.unplug=function(){var e=n.attrs;return n.hideHandles(),delete t.freeTransform,e},function t(e){("set"===e.type?e.items:[e]).map(function(e){"set"===e.type?t(e):n.items.push({el:e,attrs:{rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},transformString:e.matrix.toTransformString()})})}(t),n.items.map(function(t,e){t.el._&&t.el._.transform&&"object"==typeof t.el._.transform&&t.el._.transform.map(function(t){if(t[0])switch(t[0].toUpperCase()){case"T":n.items[e].attrs.translate.x+=t[1],n.items[e].attrs.translate.y+=t[2];break;case"S":n.items[e].attrs.scale.x*=t[1],n.items[e].attrs.scale.y*=t[2];break;case"R":n.items[e].attrs.rotate+=t[1]}})}),"set"!==t.type&&(n.attrs.rotate=n.items[0].attrs.rotate,n.attrs.scale=n.items[0].attrs.scale,n.attrs.translate=n.items[0].attrs.translate,n.items[0].attrs={rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},n.items[0].transformString=""),n.attrs.ratio=n.attrs.scale.x/n.attrs.scale.y,n.updateHandles(),n}});